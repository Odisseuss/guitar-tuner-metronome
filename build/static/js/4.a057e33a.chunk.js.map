{"version":3,"sources":["assets/icons/Metronome.svg","assets/icons/settings.svg","utils/hooks/useOutsideClickAlert.ts","common/components/Header.tsx","../node_modules/global/window.js","utils/workers/MetronomeScheduler.worker.ts","utils/workers/DetectTapTempo.worker.ts","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/construct.js","../../../src/comlink.ts","store/reducers/circularSlider.js","utils/hooks/useEventListener.ts","utils/hooks/useIsServer.ts","common/components/Knob.js","common/components/Svg.js","common/components/Labels.js","common/containers/CircularSlider.js","pages/metronome/components/MetronomeMeasureButtons.tsx","assets/icons/Tap.svg","pages/metronome/components/Metronome.tsx","pages/metronome/MetronomeContainer.tsx"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","d","fill","SvgMetronome","_ref","svgRef","title","titleId","props","width","height","viewBox","xmlns","ref","id","ForwardRef","SvgSettings","useOutsideAlerter","callback","useEffect","handleClickOutside","event","current","contains","document","addEventListener","removeEventListener","HeaderContainer","styled","div","Branding","h1","DropDown","DropDownItem","StyledMetronomeSVG","Metronome","StyledSettingsSvg","Settings","Header","setColors","navigateLocation","menuColor","handleStartTapTempo","cycleNoteType","tapTempoActive","toggleChromaticMode","chromaticMode","React","showMenu","setShowMenu","dropDownRef","location","useLocation","colors","pathname","primary","gradient_darker","gradient_lighter","to","style","display","alignItems","position","right","outline","border","background","padding","onClick","className","opacity","zIndex","undefined","win","window","global","self","module","exports","Worker_fn","Worker","Parent","args","Class","isNativeReflectConstruct","Reflect","construct","a","push","instance","Function","bind","setPrototypeOf","proxyMarker","Symbol","createEndpoint","releaseProxy","throwMarker","isObject","val","transferHandlers","Map","canHandle","serialize","obj","MessageChannel","port1","port2","expose","deserialize","port","start","wrap","value","Error","isError","message","name","stack","serialized","ep","ev","data","returnValue","path","type","argumentList","map","fromWireValue","parent","slice","reduce","prop","rawValue","transfer","Promise","resolve","catch","then","toWireValue","wireValue","transferables","postMessage","closeEndPoint","endpoint","constructor","isMessagePort","close","createProxy","throwIfProxyReleased","isReleased","isProxyReleased","proxy","Proxy","get","_target","requestResponseMessage","p","toString","r","set","_thisArg","rawArgumentList","last","processArguments","arr","processed","v","Array","concat","transferCache","WeakMap","transfers","handler","msg","Math","floor","random","Number","MAX_SAFE_INTEGER","join","l","reducer","state","action","payload","useEventListener","eventName","savedHandler","useRef","eventListener","passive","useIsServer","useState","isServer","setIsServer","Knob","isDragging","knobPosition","knobColor","knobSize","hideKnob","onMouseDown","trackSize","children","styles","knob","left","top","cursor","dragging","pause","animationPlayState","hide","transform","x","y","onTouchStart","stroke","cx","cy","Svg","label","direction","strokeDasharray","strokeDashoffset","progressColorFrom","progressColorTo","trackColor","progressSize","svgFullPath","radiansOffset","progressLineCap","svg","transformOrigin","halfTrack","radius","overflow","x1","x2","offset","stopColor","strokeWidth","strokeLinecap","Labels","labelColor","labelBottom","labelFontSize","valueFontSize","appendToValue","prependToValue","verticalOffset","hideLabelValue","labels","flexDirection","justifyContent","color","userSelect","fontSize","bottomMargin","marginBottom","appended","prepended","fontFamily","fontWeight","spreadDegrees","knobOffset","PI","bottom","getSliderRotation","number","getRadians","degrees","generateRange","min","max","rangeOfNumbers","circularSlider","transition","mounted","CircularSlider","knobDraggable","dataIndex","renderLabelValue","onChange","initialState","radians","dashFullArray","dashFullOffset","useReducer","dispatch","touchSupported","SLIDER_EVENT","DOWN","UP","MOVE","setKnobPosition","useCallback","offsetRadians","dashOffset","pointsInCircle","currentPoint","round","cos","sin","onMouseMove","touch","preventDefault","changedTouches","offsetRelativeToDocument","rect","getBoundingClientRect","scrollLeft","pageXOffset","documentElement","scrollTop","pageYOffset","mouseXFromCenter","pageX","mouseYFromCenter","pageY","atan2","getTotalLength","dataArrayLength","knobPositionIndex","sanitizedLabel","replace","ColumnContainer","RowContainer","MeasureIndicator","StyledButton","button","MetronomeMeasureButtons","beatsPerMeasure","setBeatsPerMeasure","playMetronome","isPlaying","textAlign","marginTop","borderRadius","SvgTap","xmlnsXlink","enableBackground","xmlSpace","Container","hvrBackPulseKeyframes","keyframes","hvrBackPulseAnimation","css","StyledTapIcon","TapIcon","handleSliderInputChange","primaryColor","tempo","play","handleTapTempo","setNoteType","onMouseUp","onTouchEnd","parseInt","MetronomeContainer","tempoValuesArray","comlinkWorkerApi","comlinkWorkerInstance","startTime","current16thNote","lookahead","scheduleAheadTime","nextNoteTime","noteResolution","noteLength","notesInQueue","audioContext","AudioContext","timerWorker","MetronomeLogic","nextNote","scheduleNote","scheduler","handleTempoTap","TapTempoWorker","setState","stop","prevState","secondsPerBeat","beatNumber","time","note","osc","createOscillator","connect","destination","frequency","currentTime","onmessage","e","console","log","interval","nextProps","nextState","press","release","currentColors"],"mappings":"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","file":"static/js/4.a057e33a.chunk.js","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M14.5 0.989563L8.64046 2.56123L0.935874 31.3637C0.884624 31.62 0.833374 31.8933 0.833374 32.1666C0.833374 34.0629 2.35379 35.5833 4.25004 35.5833H24.75C26.6463 35.5833 28.1667 34.0629 28.1667 32.1666C28.1667 31.8933 28.1155 31.62 28.0642 31.3637L25.7409 22.6341L23.0417 25.3333L23.3834 27.0416H16.9088L21.7605 22.19L19.3517 19.7812L12.0913 27.0416H5.61671L11.5788 4.83331H17.4213L19.9155 14.1096L22.7 11.3079L20.3596 2.56123L14.5 0.989563ZM13.2188 6.54165V23.1979L15.7813 20.6354V6.54165H13.2188ZM27.808 11.325L22.9734 16.1596L21.7605 14.9466L19.3517 17.3725L24.1692 22.19L26.595 19.7812L25.3821 18.5683L30.2167 13.7337L27.808 11.325Z\",\n  fill: \"current\"\n});\n\nfunction SvgMetronome(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 31,\n    height: 36,\n    viewBox: \"0 0 31 36\",\n    fill: \"current\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgMetronome);\nexport default __webpack_public_path__ + \"static/media/Metronome.bf2d0371.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M32.6975 22.1059C32.7659 21.5934 32.8 21.0638 32.8 20.5C32.8 19.9534 32.7659 19.4067 32.6804 18.8942L36.1484 16.195C36.4559 15.9559 36.5413 15.4946 36.3534 15.153L33.0734 9.48129C32.8684 9.10545 32.4413 8.98587 32.0654 9.10545L27.9825 10.7455C27.1284 10.0963 26.2229 9.54962 25.215 9.13962L24.6 4.80045C24.5317 4.39045 24.19 4.10004 23.78 4.10004H17.22C16.81 4.10004 16.4854 4.39045 16.4171 4.80045L15.8021 9.13962C14.7942 9.54962 13.8717 10.1134 13.0346 10.7455L8.95169 9.10545C8.57586 8.96879 8.14877 9.10545 7.94377 9.48129L4.68086 15.153C4.47586 15.5117 4.54419 15.9559 4.88586 16.195L8.35377 18.8942C8.26836 19.4067 8.20003 19.9705 8.20003 20.5C8.20003 21.0296 8.23419 21.5934 8.31961 22.1059L4.85169 24.805C4.54419 25.0442 4.45877 25.5055 4.64669 25.8471L7.92669 31.5188C8.13169 31.8946 8.55877 32.0142 8.93461 31.8946L13.0175 30.2546C13.8717 30.9038 14.7771 31.4505 15.785 31.8605L16.4 36.1996C16.4854 36.6096 16.81 36.9 17.22 36.9H23.78C24.19 36.9 24.5317 36.6096 24.5829 36.1996L25.1979 31.8605C26.2059 31.4505 27.1284 30.9038 27.9654 30.2546L32.0484 31.8946C32.4242 32.0313 32.8513 31.8946 33.0563 31.5188L36.3363 25.8471C36.5413 25.4713 36.4559 25.0442 36.1313 24.805L32.6975 22.1059ZM20.5 26.65C17.1175 26.65 14.35 23.8825 14.35 20.5C14.35 17.1175 17.1175 14.35 20.5 14.35C23.8825 14.35 26.65 17.1175 26.65 20.5C26.65 23.8825 23.8825 26.65 20.5 26.65Z\",\n  fill: \"current\"\n});\n\nfunction SvgSettings(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 36,\n    height: 36,\n    viewBox: \"0 0 36 36\",\n    fill: \"current\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSettings);\nexport default __webpack_public_path__ + \"static/media/settings.0131e546.svg\";\nexport { ForwardRef as ReactComponent };","import { useEffect } from 'react';\r\n\r\nconst useOutsideAlerter = (ref: any, callback: any) => {\r\n\tuseEffect(() => {\r\n\t\t/**\r\n\t\t * Alert if clicked on outside of element\r\n\t\t */\r\n\t\tfunction handleClickOutside(event: any) {\r\n\t\t\tif (ref.current && !ref.current.contains(event.target)) {\r\n\t\t\t\tcallback();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Bind the event listener\r\n\t\tdocument.addEventListener('mousedown', handleClickOutside);\r\n\t\treturn () => {\r\n\t\t\t// Unbind the event listener on clean up\r\n\t\t\tdocument.removeEventListener('mousedown', handleClickOutside);\r\n\t\t};\r\n\t}, [ref, callback]);\r\n};\r\n\r\nexport default useOutsideAlerter;\r\n","import * as React from 'react';\r\nimport styled from 'styled-components';\r\nimport { ReactComponent as Metronome } from '../../assets/icons/Metronome.svg';\r\nimport { ReactComponent as Settings } from '../../assets/icons/settings.svg';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport useOutsideAlerter from '../../utils/hooks/useOutsideClickAlert';\r\nlet HeaderContainer = styled.div`\r\n\theight: 10%;\r\n\twidth: 100%;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n`;\r\nlet Branding = styled.h1`\r\n\tfont-size: 18px;\r\n\tfont-weight: 500;\r\n\ttext-transform: uppercase;\r\n\tdisplay: inline-block;\r\n`;\r\nlet DropDown = styled.div`\r\n\tbackground-color: #202124;\r\n\tborder-width: 0;\r\n\tbox-shadow: 0 1px 2px 0 rgb(0 0 0 / 30%), 0 2px 6px 2px rgb(0 0 0 / 15%);\r\n\tposition: absolute;\r\n\ttop: 100%;\r\n\tright: 0;\r\n\twidth: 150px;\r\n\tz-index: 9999;\r\n\topacity: 0;\r\n\ttransition: opacity 0.2s;\r\n`;\r\nlet DropDownItem = styled.div`\r\n\tborder: 1px solid transparent;\r\n\tfont-size: 0.875rem;\r\n\tfont-weight: 400;\r\n\tpadding: 10px 15px;\r\n\tposition: relative;\r\n\tcolor: #333;\r\n\tcursor: pointer;\r\n\tmargin: 0;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\r\n\t& button {\r\n\t\tcursor: pointer;\r\n\t\tbackground: transparent;\r\n\t\tcolor: white;\r\n\t\tborder: none;\r\n\t\toutline: none;\r\n\t}\r\n\t&:hover {\r\n\t\tborder: 1px solid white;\r\n\t}\r\n`;\r\nlet StyledMetronomeSVG = styled(Metronome)`\r\n\tposition: absolute;\r\n\tleft: 30px;\r\n\ttransition: fill 0.2s;\r\n`;\r\nlet StyledSettingsSvg = styled(Settings)`\r\n\ttransition: all 0.2s;\r\n`;\r\nexport interface HeaderProps {\r\n\tnavigateLocation: string;\r\n\tmenuColor: string;\r\n\tsetColors: React.Dispatch<\r\n\t\tReact.SetStateAction<{\r\n\t\t\tprimary: string;\r\n\t\t\tgradient_darker: string;\r\n\t\t\tgradient_lighter: string;\r\n\t\t}>\r\n\t>;\r\n\thandleStartTapTempo?: (action: string) => void;\r\n\tcycleNoteType?: () => void;\r\n\ttapTempoActive?: boolean;\r\n\ttoggleChromaticMode?: () => void;\r\n\tchromaticMode?: () => void;\r\n}\r\n\r\nconst Header: React.FunctionComponent<HeaderProps> = ({\r\n\tsetColors,\r\n\tnavigateLocation,\r\n\tmenuColor,\r\n\thandleStartTapTempo,\r\n\tcycleNoteType,\r\n\ttapTempoActive,\r\n\ttoggleChromaticMode,\r\n\tchromaticMode,\r\n}) => {\r\n\tlet [showMenu, setShowMenu] = React.useState(false);\r\n\tlet dropDownRef = React.useRef(null);\r\n\r\n\tlet location = useLocation();\r\n\tReact.useEffect(() => {\r\n\t\tlet colors =\r\n\t\t\tlocation.pathname === '/'\r\n\t\t\t\t? {\r\n\t\t\t\t\t\tprimary: '#F72640',\r\n\t\t\t\t\t\tgradient_darker: '#0F0910',\r\n\t\t\t\t\t\tgradient_lighter: '#1F0E18',\r\n\t\t\t\t  }\r\n\t\t\t\t: {\r\n\t\t\t\t\t\tprimary: '#FFFFFF',\r\n\t\t\t\t\t\tgradient_darker: '#0F0F0F',\r\n\t\t\t\t\t\tgradient_lighter: '#282828',\r\n\t\t\t\t  };\r\n\t\tsetColors(colors);\r\n\t}, [location.pathname, setColors]);\r\n\tconst toggleMenu = () => {\r\n\t\tsetShowMenu(!showMenu);\r\n\t};\r\n\tconst hideMenu = () => {\r\n\t\tsetShowMenu(false);\r\n\t};\r\n\tconst renderDropdownItems = () => {\r\n\t\treturn location.pathname === '/' ? (\r\n\t\t\t<>\r\n\t\t\t\t<DropDownItem>\r\n\t\t\t\t\t<button>Tutorial</button>\r\n\t\t\t\t</DropDownItem>\r\n\t\t\t\t<DropDownItem>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tif (toggleChromaticMode && chromaticMode) {\r\n\t\t\t\t\t\t\t\ttoggleChromaticMode();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tChromatic Mode\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</DropDownItem>\r\n\t\t\t</>\r\n\t\t) : (\r\n\t\t\t<>\r\n\t\t\t\t<DropDownItem>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\thandleStartTapTempo &&\r\n\t\t\t\t\t\t\t\ttapTempoActive != undefined\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t!tapTempoActive\r\n\t\t\t\t\t\t\t\t\t? handleStartTapTempo('start')\r\n\t\t\t\t\t\t\t\t\t: handleStartTapTempo('stop');\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tTap Tempo\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</DropDownItem>\r\n\t\t\t\t<DropDownItem>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tif (cycleNoteType) cycleNoteType();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tNote Type\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</DropDownItem>\r\n\t\t\t</>\r\n\t\t);\r\n\t};\r\n\tuseOutsideAlerter(dropDownRef, hideMenu);\r\n\treturn (\r\n\t\t<HeaderContainer>\r\n\t\t\t<Link\r\n\t\t\t\tto={navigateLocation}\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\theight: '100%',\r\n\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\talignItems: 'center',\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<StyledMetronomeSVG\r\n\t\t\t\t\tfill={navigateLocation === '/' ? '#FFFFFF' : '#969696'}\r\n\t\t\t\t/>\r\n\t\t\t</Link>\r\n\r\n\t\t\t<Branding>Guitune</Branding>\r\n\t\t\t<div\r\n\t\t\t\tstyle={{ position: 'absolute', right: '30px' }}\r\n\t\t\t\tref={dropDownRef}\r\n\t\t\t>\r\n\t\t\t\t<button\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\toutline: 'none',\r\n\t\t\t\t\t\tborder: 'none',\r\n\t\t\t\t\t\tbackground: 'transparent',\r\n\t\t\t\t\t\tpadding: 0\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonClick={toggleMenu}\r\n\t\t\t\t>\r\n\t\t\t\t\t<StyledSettingsSvg\r\n\t\t\t\t\t\tfill={showMenu ? '#FFFFFF' : '#969696'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</button>\r\n\t\t\t\t<DropDown\r\n\t\t\t\t\tclassName='dropdown'\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tbackground: menuColor,\r\n\t\t\t\t\t\topacity: showMenu ? 1 : 0,\r\n\t\t\t\t\t\tzIndex: showMenu ? 9999 : -100,\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{renderDropdownItems()}\r\n\t\t\t\t</DropDown>\r\n\t\t\t</div>\r\n\t\t</HeaderContainer>\r\n\t);\r\n};\r\n\r\nexport default Header;\r\n","var win;\n\nif (typeof window !== \"undefined\") {\n    win = window;\n} else if (typeof global !== \"undefined\") {\n    win = global;\n} else if (typeof self !== \"undefined\"){\n    win = self;\n} else {\n    win = {};\n}\n\nmodule.exports = win;\n","export default function Worker_fn() {\n  return new Worker(__webpack_public_path__ + \"static/js/MetronomeScheduler.worker.6dc53609.js\");\n}\n","export default function Worker_fn() {\n  return new Worker(__webpack_public_path__ + \"static/js/DetectTapTempo.worker.1b0ffe89.js\");\n}\n","import setPrototypeOf from \"@babel/runtime/helpers/esm/setPrototypeOf\";\nimport isNativeReflectConstruct from \"@babel/runtime/helpers/esm/isNativeReflectConstruct\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","/**\n * Copyright 2019 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  Endpoint,\n  EventSource,\n  Message,\n  MessageType,\n  PostMessageWithOrigin,\n  WireValue,\n  WireValueType,\n} from \"./protocol\";\nexport { Endpoint };\n\nexport const proxyMarker = Symbol(\"Comlink.proxy\");\nexport const createEndpoint = Symbol(\"Comlink.endpoint\");\nexport const releaseProxy = Symbol(\"Comlink.releaseProxy\");\n\nconst throwMarker = Symbol(\"Comlink.thrown\");\n\n/**\n * Interface of values that were marked to be proxied with `comlink.proxy()`.\n * Can also be implemented by classes.\n */\nexport interface ProxyMarked {\n  [proxyMarker]: true;\n}\n\n/**\n * Takes a type and wraps it in a Promise, if it not already is one.\n * This is to avoid `Promise<Promise<T>>`.\n *\n * This is the inverse of `Unpromisify<T>`.\n */\ntype Promisify<T> = T extends Promise<unknown> ? T : Promise<T>;\n/**\n * Takes a type that may be Promise and unwraps the Promise type.\n * If `P` is not a Promise, it returns `P`.\n *\n * This is the inverse of `Promisify<T>`.\n */\ntype Unpromisify<P> = P extends Promise<infer T> ? T : P;\n\n/**\n * Takes the raw type of a remote property and returns the type that is visible to the local thread on the proxy.\n *\n * Note: This needs to be its own type alias, otherwise it will not distribute over unions.\n * See https://www.typescriptlang.org/docs/handbook/advanced-types.html#distributive-conditional-types\n */\ntype RemoteProperty<T> =\n  // If the value is a method, comlink will proxy it automatically.\n  // Objects are only proxied if they are marked to be proxied.\n  // Otherwise, the property is converted to a Promise that resolves the cloned value.\n  T extends Function | ProxyMarked ? Remote<T> : Promisify<T>;\n\n/**\n * Takes the raw type of a property as a remote thread would see it through a proxy (e.g. when passed in as a function\n * argument) and returns the type that the local thread has to supply.\n *\n * This is the inverse of `RemoteProperty<T>`.\n *\n * Note: This needs to be its own type alias, otherwise it will not distribute over unions. See\n * https://www.typescriptlang.org/docs/handbook/advanced-types.html#distributive-conditional-types\n */\ntype LocalProperty<T> = T extends Function | ProxyMarked\n  ? Local<T>\n  : Unpromisify<T>;\n\n/**\n * Proxies `T` if it is a `ProxyMarked`, clones it otherwise (as handled by structured cloning and transfer handlers).\n */\nexport type ProxyOrClone<T> = T extends ProxyMarked ? Remote<T> : T;\n/**\n * Inverse of `ProxyOrClone<T>`.\n */\nexport type UnproxyOrClone<T> = T extends RemoteObject<ProxyMarked>\n  ? Local<T>\n  : T;\n\n/**\n * Takes the raw type of a remote object in the other thread and returns the type as it is visible to the local thread\n * when proxied with `Comlink.proxy()`.\n *\n * This does not handle call signatures, which is handled by the more general `Remote<T>` type.\n *\n * @template T The raw type of a remote object as seen in the other thread.\n */\nexport type RemoteObject<T> = { [P in keyof T]: RemoteProperty<T[P]> };\n/**\n * Takes the type of an object as a remote thread would see it through a proxy (e.g. when passed in as a function\n * argument) and returns the type that the local thread has to supply.\n *\n * This does not handle call signatures, which is handled by the more general `Local<T>` type.\n *\n * This is the inverse of `RemoteObject<T>`.\n *\n * @template T The type of a proxied object.\n */\nexport type LocalObject<T> = { [P in keyof T]: LocalProperty<T[P]> };\n\n/**\n * Additional special comlink methods available on each proxy returned by `Comlink.wrap()`.\n */\nexport interface ProxyMethods {\n  [createEndpoint]: () => Promise<MessagePort>;\n  [releaseProxy]: () => void;\n}\n\n/**\n * Takes the raw type of a remote object, function or class in the other thread and returns the type as it is visible to\n * the local thread from the proxy return value of `Comlink.wrap()` or `Comlink.proxy()`.\n */\nexport type Remote<T> =\n  // Handle properties\n  RemoteObject<T> &\n    // Handle call signature (if present)\n    (T extends (...args: infer TArguments) => infer TReturn\n      ? (\n          ...args: { [I in keyof TArguments]: UnproxyOrClone<TArguments[I]> }\n        ) => Promisify<ProxyOrClone<Unpromisify<TReturn>>>\n      : unknown) &\n    // Handle construct signature (if present)\n    // The return of construct signatures is always proxied (whether marked or not)\n    (T extends { new (...args: infer TArguments): infer TInstance }\n      ? {\n          new (\n            ...args: {\n              [I in keyof TArguments]: UnproxyOrClone<TArguments[I]>;\n            }\n          ): Promisify<Remote<TInstance>>;\n        }\n      : unknown) &\n    // Include additional special comlink methods available on the proxy.\n    ProxyMethods;\n\n/**\n * Expresses that a type can be either a sync or async.\n */\ntype MaybePromise<T> = Promise<T> | T;\n\n/**\n * Takes the raw type of a remote object, function or class as a remote thread would see it through a proxy (e.g. when\n * passed in as a function argument) and returns the type the local thread has to supply.\n *\n * This is the inverse of `Remote<T>`. It takes a `Remote<T>` and returns its original input `T`.\n */\nexport type Local<T> =\n  // Omit the special proxy methods (they don't need to be supplied, comlink adds them)\n  Omit<LocalObject<T>, keyof ProxyMethods> &\n    // Handle call signatures (if present)\n    (T extends (...args: infer TArguments) => infer TReturn\n      ? (\n          ...args: { [I in keyof TArguments]: ProxyOrClone<TArguments[I]> }\n        ) => // The raw function could either be sync or async, but is always proxied automatically\n        MaybePromise<UnproxyOrClone<Unpromisify<TReturn>>>\n      : unknown) &\n    // Handle construct signature (if present)\n    // The return of construct signatures is always proxied (whether marked or not)\n    (T extends { new (...args: infer TArguments): infer TInstance }\n      ? {\n          new (\n            ...args: {\n              [I in keyof TArguments]: ProxyOrClone<TArguments[I]>;\n            }\n          ): // The raw constructor could either be sync or async, but is always proxied automatically\n          MaybePromise<Local<Unpromisify<TInstance>>>;\n        }\n      : unknown);\n\nconst isObject = (val: unknown): val is object =>\n  (typeof val === \"object\" && val !== null) || typeof val === \"function\";\n\n/**\n * Customizes the serialization of certain values as determined by `canHandle()`.\n *\n * @template T The input type being handled by this transfer handler.\n * @template S The serialized type sent over the wire.\n */\nexport interface TransferHandler<T, S> {\n  /**\n   * Gets called for every value to determine whether this transfer handler\n   * should serialize the value, which includes checking that it is of the right\n   * type (but can perform checks beyond that as well).\n   */\n  canHandle(value: unknown): value is T;\n\n  /**\n   * Gets called with the value if `canHandle()` returned `true` to produce a\n   * value that can be sent in a message, consisting of structured-cloneable\n   * values and/or transferrable objects.\n   */\n  serialize(value: T): [S, Transferable[]];\n\n  /**\n   * Gets called to deserialize an incoming value that was serialized in the\n   * other thread with this transfer handler (known through the name it was\n   * registered under).\n   */\n  deserialize(value: S): T;\n}\n\n/**\n * Internal transfer handle to handle objects marked to proxy.\n */\nconst proxyTransferHandler: TransferHandler<object, MessagePort> = {\n  canHandle: (val): val is ProxyMarked =>\n    isObject(val) && (val as ProxyMarked)[proxyMarker],\n  serialize(obj) {\n    const { port1, port2 } = new MessageChannel();\n    expose(obj, port1);\n    return [port2, [port2]];\n  },\n  deserialize(port) {\n    port.start();\n    return wrap(port);\n  },\n};\n\ninterface ThrownValue {\n  [throwMarker]: unknown; // just needs to be present\n  value: unknown;\n}\ntype SerializedThrownValue =\n  | { isError: true; value: Error }\n  | { isError: false; value: unknown };\n\n/**\n * Internal transfer handler to handle thrown exceptions.\n */\nconst throwTransferHandler: TransferHandler<\n  ThrownValue,\n  SerializedThrownValue\n> = {\n  canHandle: (value): value is ThrownValue =>\n    isObject(value) && throwMarker in value,\n  serialize({ value }) {\n    let serialized: SerializedThrownValue;\n    if (value instanceof Error) {\n      serialized = {\n        isError: true,\n        value: {\n          message: value.message,\n          name: value.name,\n          stack: value.stack,\n        },\n      };\n    } else {\n      serialized = { isError: false, value };\n    }\n    return [serialized, []];\n  },\n  deserialize(serialized) {\n    if (serialized.isError) {\n      throw Object.assign(\n        new Error(serialized.value.message),\n        serialized.value\n      );\n    }\n    throw serialized.value;\n  },\n};\n\n/**\n * Allows customizing the serialization of certain values.\n */\nexport const transferHandlers = new Map<\n  string,\n  TransferHandler<unknown, unknown>\n>([\n  [\"proxy\", proxyTransferHandler],\n  [\"throw\", throwTransferHandler],\n]);\n\nexport function expose(obj: any, ep: Endpoint = self as any) {\n  ep.addEventListener(\"message\", function callback(ev: MessageEvent) {\n    if (!ev || !ev.data) {\n      return;\n    }\n    const { id, type, path } = {\n      path: [] as string[],\n      ...(ev.data as Message),\n    };\n    const argumentList = (ev.data.argumentList || []).map(fromWireValue);\n    let returnValue;\n    try {\n      const parent = path.slice(0, -1).reduce((obj, prop) => obj[prop], obj);\n      const rawValue = path.reduce((obj, prop) => obj[prop], obj);\n      switch (type) {\n        case MessageType.GET:\n          {\n            returnValue = rawValue;\n          }\n          break;\n        case MessageType.SET:\n          {\n            parent[path.slice(-1)[0]] = fromWireValue(ev.data.value);\n            returnValue = true;\n          }\n          break;\n        case MessageType.APPLY:\n          {\n            returnValue = rawValue.apply(parent, argumentList);\n          }\n          break;\n        case MessageType.CONSTRUCT:\n          {\n            const value = new rawValue(...argumentList);\n            returnValue = proxy(value);\n          }\n          break;\n        case MessageType.ENDPOINT:\n          {\n            const { port1, port2 } = new MessageChannel();\n            expose(obj, port2);\n            returnValue = transfer(port1, [port1]);\n          }\n          break;\n        case MessageType.RELEASE:\n          {\n            returnValue = undefined;\n          }\n          break;\n      }\n    } catch (value) {\n      returnValue = { value, [throwMarker]: 0 };\n    }\n    Promise.resolve(returnValue)\n      .catch((value) => {\n        return { value, [throwMarker]: 0 };\n      })\n      .then((returnValue) => {\n        const [wireValue, transferables] = toWireValue(returnValue);\n        ep.postMessage({ ...wireValue, id }, transferables);\n        if (type === MessageType.RELEASE) {\n          // detach and deactive after sending release response above.\n          ep.removeEventListener(\"message\", callback as any);\n          closeEndPoint(ep);\n        }\n      });\n  } as any);\n  if (ep.start) {\n    ep.start();\n  }\n}\n\nfunction isMessagePort(endpoint: Endpoint): endpoint is MessagePort {\n  return endpoint.constructor.name === \"MessagePort\";\n}\n\nfunction closeEndPoint(endpoint: Endpoint) {\n  if (isMessagePort(endpoint)) endpoint.close();\n}\n\nexport function wrap<T>(ep: Endpoint, target?: any): Remote<T> {\n  return createProxy<T>(ep, [], target) as any;\n}\n\nfunction throwIfProxyReleased(isReleased: boolean) {\n  if (isReleased) {\n    throw new Error(\"Proxy has been released and is not useable\");\n  }\n}\n\nfunction createProxy<T>(\n  ep: Endpoint,\n  path: (string | number | symbol)[] = [],\n  target: object = function () {}\n): Remote<T> {\n  let isProxyReleased = false;\n  const proxy = new Proxy(target, {\n    get(_target, prop) {\n      throwIfProxyReleased(isProxyReleased);\n      if (prop === releaseProxy) {\n        return () => {\n          return requestResponseMessage(ep, {\n            type: MessageType.RELEASE,\n            path: path.map((p) => p.toString()),\n          }).then(() => {\n            closeEndPoint(ep);\n            isProxyReleased = true;\n          });\n        };\n      }\n      if (prop === \"then\") {\n        if (path.length === 0) {\n          return { then: () => proxy };\n        }\n        const r = requestResponseMessage(ep, {\n          type: MessageType.GET,\n          path: path.map((p) => p.toString()),\n        }).then(fromWireValue);\n        return r.then.bind(r);\n      }\n      return createProxy(ep, [...path, prop]);\n    },\n    set(_target, prop, rawValue) {\n      throwIfProxyReleased(isProxyReleased);\n      // FIXME: ES6 Proxy Handler `set` methods are supposed to return a\n      // boolean. To show good will, we return true asynchronously \\_()_/\n      const [value, transferables] = toWireValue(rawValue);\n      return requestResponseMessage(\n        ep,\n        {\n          type: MessageType.SET,\n          path: [...path, prop].map((p) => p.toString()),\n          value,\n        },\n        transferables\n      ).then(fromWireValue) as any;\n    },\n    apply(_target, _thisArg, rawArgumentList) {\n      throwIfProxyReleased(isProxyReleased);\n      const last = path[path.length - 1];\n      if ((last as any) === createEndpoint) {\n        return requestResponseMessage(ep, {\n          type: MessageType.ENDPOINT,\n        }).then(fromWireValue);\n      }\n      // We just pretend that `bind()` didnt happen.\n      if (last === \"bind\") {\n        return createProxy(ep, path.slice(0, -1));\n      }\n      const [argumentList, transferables] = processArguments(rawArgumentList);\n      return requestResponseMessage(\n        ep,\n        {\n          type: MessageType.APPLY,\n          path: path.map((p) => p.toString()),\n          argumentList,\n        },\n        transferables\n      ).then(fromWireValue);\n    },\n    construct(_target, rawArgumentList) {\n      throwIfProxyReleased(isProxyReleased);\n      const [argumentList, transferables] = processArguments(rawArgumentList);\n      return requestResponseMessage(\n        ep,\n        {\n          type: MessageType.CONSTRUCT,\n          path: path.map((p) => p.toString()),\n          argumentList,\n        },\n        transferables\n      ).then(fromWireValue);\n    },\n  });\n  return proxy as any;\n}\n\nfunction myFlat<T>(arr: (T | T[])[]): T[] {\n  return Array.prototype.concat.apply([], arr);\n}\n\nfunction processArguments(argumentList: any[]): [WireValue[], Transferable[]] {\n  const processed = argumentList.map(toWireValue);\n  return [processed.map((v) => v[0]), myFlat(processed.map((v) => v[1]))];\n}\n\nconst transferCache = new WeakMap<any, Transferable[]>();\nexport function transfer(obj: any, transfers: Transferable[]) {\n  transferCache.set(obj, transfers);\n  return obj;\n}\n\nexport function proxy<T>(obj: T): T & ProxyMarked {\n  return Object.assign(obj, { [proxyMarker]: true }) as any;\n}\n\nexport function windowEndpoint(\n  w: PostMessageWithOrigin,\n  context: EventSource = self,\n  targetOrigin = \"*\"\n): Endpoint {\n  return {\n    postMessage: (msg: any, transferables: Transferable[]) =>\n      w.postMessage(msg, targetOrigin, transferables),\n    addEventListener: context.addEventListener.bind(context),\n    removeEventListener: context.removeEventListener.bind(context),\n  };\n}\n\nfunction toWireValue(value: any): [WireValue, Transferable[]] {\n  for (const [name, handler] of transferHandlers) {\n    if (handler.canHandle(value)) {\n      const [serializedValue, transferables] = handler.serialize(value);\n      return [\n        {\n          type: WireValueType.HANDLER,\n          name,\n          value: serializedValue,\n        },\n        transferables,\n      ];\n    }\n  }\n  return [\n    {\n      type: WireValueType.RAW,\n      value,\n    },\n    transferCache.get(value) || [],\n  ];\n}\n\nfunction fromWireValue(value: WireValue): any {\n  switch (value.type) {\n    case WireValueType.HANDLER:\n      return transferHandlers.get(value.name)!.deserialize(value.value);\n    case WireValueType.RAW:\n      return value.value;\n  }\n}\n\nfunction requestResponseMessage(\n  ep: Endpoint,\n  msg: Message,\n  transfers?: Transferable[]\n): Promise<WireValue> {\n  return new Promise((resolve) => {\n    const id = generateUUID();\n    ep.addEventListener(\"message\", function l(ev: MessageEvent) {\n      if (!ev.data || !ev.data.id || ev.data.id !== id) {\n        return;\n      }\n      ep.removeEventListener(\"message\", l as any);\n      resolve(ev.data);\n    } as any);\n    if (ep.start) {\n      ep.start();\n    }\n    ep.postMessage({ id, ...msg }, transfers);\n  });\n}\n\nfunction generateUUID(): string {\n  return new Array(4)\n    .fill(0)\n    .map(() => Math.floor(Math.random() * Number.MAX_SAFE_INTEGER).toString(16))\n    .join(\"-\");\n}\n","const reducer = (state, action) => {\r\n  switch (action.type) {\r\n    case \"init\":\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n      };\r\n    case \"setKnobPosition\":\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n      };\r\n    case \"onMouseDown\":\r\n    case \"onMouseUp\":\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n      };\r\n    case \"setInitialKnobPosition\":\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n      };\r\n    default:\r\n      throw new Error();\r\n  }\r\n};\r\n\r\nexport default reducer;\r\n","import { useEffect, useRef } from \"react\";\r\n//@ts-ignore\r\nimport window from \"global\";\r\n\r\nconst useEventListener = (eventName: any, handler: null) => {\r\n  const savedHandler = useRef(null);\r\n\r\n  useEffect(() => {\r\n    savedHandler.current = handler;\r\n  }, [handler]);\r\n\r\n  useEffect(() => {\r\n    if (typeof window !== \"undefined\") {\r\n      // Create event listener that calls handler function stored in ref\r\n      //@ts-ignore\r\n      const eventListener = (event: any) => savedHandler.current(event);\r\n\r\n      window.addEventListener(eventName, eventListener, { passive: false });\r\n      return () => {\r\n        window.removeEventListener(eventName, eventListener);\r\n      };\r\n    }\r\n  }, [eventName]);\r\n};\r\n\r\nexport default useEventListener;\r\n","import { useState, useEffect } from \"react\";\r\n\r\nconst useIsServer = () => {\r\n  const [isServer, setIsServer] = useState(true);\r\n  useEffect(() => {\r\n    setIsServer(false);\r\n  }, []);\r\n  return isServer;\r\n};\r\n\r\nexport default useIsServer;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst Knob = ({\r\n  isDragging,\r\n  knobPosition,\r\n  knobColor,\r\n  knobSize,\r\n  hideKnob,\r\n  onMouseDown,\r\n  trackSize,\r\n  children,\r\n}) => {\r\n  const styles = {\r\n    knob: {\r\n      position: \"absolute\",\r\n      left: `-${knobSize / 2 - trackSize / 2}px`,\r\n      top: `-${knobSize / 2 - trackSize / 2}px`,\r\n      cursor: \"grab\",\r\n      zIndex: 3,\r\n    },\r\n\r\n    dragging: {\r\n      cursor: \"grabbing\",\r\n    },\r\n\r\n    pause: {\r\n      animationPlayState: \"paused\",\r\n    },\r\n\r\n    hide: {\r\n      opacity: 0,\r\n    },\r\n  };\r\n\r\n  const defaultKnobIcon = () => {\r\n    return (\r\n      <svg\r\n        width={`${knobSize}px`}\r\n        height={`${knobSize}px`}\r\n        viewBox={`0 0 36 36`}\r\n      ></svg>\r\n    );\r\n  };\r\n\r\n  const customKnobIcon = () => children;\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        transform: `translate(${knobPosition.x}px, ${knobPosition.y}px)`,\r\n        ...styles.knob,\r\n        ...(isDragging && styles.dragging),\r\n        ...(hideKnob && styles.hide),\r\n      }}\r\n      onMouseDown={onMouseDown}\r\n      onTouchStart={onMouseDown}\r\n    >\r\n      <svg\r\n        width={`${knobSize}px`}\r\n        height={`${knobSize}px`}\r\n        viewBox={`0 0 ${knobSize} ${knobSize}`}\r\n      >\r\n        <circle\r\n          fill={knobColor}\r\n          stroke=\"none\"\r\n          cx={knobSize / 2}\r\n          cy={knobSize / 2}\r\n          r={(knobSize * 2) / 3 / 2}\r\n        />\r\n        {children ? customKnobIcon() : defaultKnobIcon()}\r\n      </svg>\r\n    </div>\r\n  );\r\n};\r\n\r\nKnob.propTypes = {\r\n  isDragging: PropTypes.bool,\r\n  knobPosition: PropTypes.object,\r\n  knobColor: PropTypes.string,\r\n  knobRadius: PropTypes.number,\r\n  knobSize: PropTypes.number,\r\n  trackSize: PropTypes.number,\r\n  children: PropTypes.element,\r\n  onMouseDown: PropTypes.func,\r\n};\r\n\r\nexport default Knob;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst Svg = ({\r\n  width,\r\n  label,\r\n  direction,\r\n  strokeDasharray,\r\n  strokeDashoffset,\r\n  progressColorFrom,\r\n  progressColorTo,\r\n  trackColor,\r\n  progressSize,\r\n  trackSize,\r\n  svgFullPath,\r\n  radiansOffset,\r\n  progressLineCap,\r\n}) => {\r\n  const styles = {\r\n    svg: {\r\n      position: \"relative\",\r\n      zIndex: 2,\r\n    },\r\n\r\n    path: {\r\n      transform: `rotate(${radiansOffset}rad) ${\r\n        direction === -1 ? \"scale(-1, 1)\" : \"scale(1, 1)\"\r\n      }`,\r\n      transformOrigin: \"center center\",\r\n    },\r\n  };\r\n\r\n  const halfTrack = trackSize / 2;\r\n  const radius = width / 2 - halfTrack;\r\n\r\n  return (\r\n    <svg\r\n      width={`${width}px`}\r\n      height={`${width}px`}\r\n      viewBox={`0 0 ${width} ${width}`}\r\n      overflow=\"visible\"\r\n      style={styles.svg}\r\n    >\r\n      <defs>\r\n        <linearGradient id={label} x1=\"100%\" x2=\"0%\">\r\n          <stop offset=\"0%\" stopColor={progressColorFrom} />\r\n          <stop offset=\"100%\" stopColor={progressColorTo} />\r\n        </linearGradient>\r\n      </defs>\r\n      <circle\r\n        strokeWidth={trackSize}\r\n        fill=\"none\"\r\n        stroke={trackColor}\r\n        cx={width / 2}\r\n        cy={width / 2}\r\n        r={radius}\r\n      />\r\n      <path\r\n        style={styles.path}\r\n        ref={svgFullPath}\r\n        strokeDasharray={strokeDasharray}\r\n        strokeDashoffset={strokeDashoffset}\r\n        strokeWidth={progressSize}\r\n        strokeLinecap={progressLineCap !== \"round\" ? \"butt\" : \"round\"}\r\n        fill=\"none\"\r\n        stroke={`url(#${label})`}\r\n        d={`\r\n                        M ${width / 2}, ${width / 2}\r\n                        m 0, -${width / 2 - halfTrack}\r\n                        a ${width / 2 - halfTrack},${\r\n          width / 2 - halfTrack\r\n        } 0 0,1 0,${width - halfTrack * 2}\r\n                        a -${width / 2 - halfTrack},-${\r\n          width / 2 - halfTrack\r\n        } 0 0,1 0,-${width - halfTrack * 2}\r\n                    `}\r\n      />\r\n    </svg>\r\n  );\r\n};\r\n\r\nSvg.propTypes = {\r\n  width: PropTypes.number,\r\n  label: PropTypes.string,\r\n  direction: PropTypes.number,\r\n  svgFullPath: PropTypes.object,\r\n  strokeDasharray: PropTypes.number,\r\n  strokeDashoffset: PropTypes.number,\r\n  progressColorFrom: PropTypes.string,\r\n  progressColorTo: PropTypes.string,\r\n  progressLineCap: PropTypes.string,\r\n  progressSize: PropTypes.number,\r\n  trackColor: PropTypes.string,\r\n  trackSize: PropTypes.number,\r\n  radiansOffset: PropTypes.number,\r\n};\r\n\r\nexport default Svg;\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst Labels = ({\r\n  labelColor,\r\n  labelBottom,\r\n  labelFontSize,\r\n  valueFontSize,\r\n  appendToValue,\r\n  prependToValue,\r\n  verticalOffset,\r\n  hideLabelValue,\r\n  label,\r\n  value,\r\n}) => {\r\n  const styles = {\r\n    labels: {\r\n      position: \"absolute\",\r\n      top: \"0\",\r\n      left: \"0\",\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n      display: \"flex\",\r\n      flexDirection: \"column\",\r\n      justifyContent: \"center\",\r\n      alignItems: \"center\",\r\n      color: `${labelColor}`,\r\n      userSelect: \"none\",\r\n      zIndex: 1,\r\n    },\r\n\r\n    value: {\r\n      fontSize: `${valueFontSize}`,\r\n      position: \"relative\",\r\n    },\r\n\r\n    bottomMargin: {\r\n      marginBottom: `calc(${verticalOffset})`,\r\n    },\r\n\r\n    appended: {\r\n      position: \"absolute\",\r\n      right: \"0\",\r\n      top: \"0\",\r\n      transform: \"translate(100%, 0)\",\r\n    },\r\n\r\n    prepended: {\r\n      position: \"absolute\",\r\n      left: \"0\",\r\n      top: \"0\",\r\n      transform: \"translate(-100%, 0)\",\r\n    },\r\n\r\n    hide: {\r\n      display: \"none\",\r\n    },\r\n  };\r\n\r\n  return (\r\n    <div style={{ ...styles.labels, ...(hideLabelValue && styles.hide) }}>\r\n      {labelBottom || <div style={{ fontSize: labelFontSize }}>{label}</div>}\r\n      <div\r\n        style={{\r\n          ...styles.value,\r\n          ...(!labelBottom && styles.bottomMargin),\r\n        }}\r\n      >\r\n        <code style={{ fontFamily: \"Be Vietnam\", fontWeight: 600 }}>\r\n          <span style={styles.prepended}>{prependToValue}</span>\r\n          {value}\r\n          <span style={styles.appended}>{appendToValue}</span>\r\n        </code>\r\n      </div>\r\n      {labelBottom && <div style={{ fontSize: labelFontSize }}>{label}</div>}\r\n    </div>\r\n  );\r\n};\r\n\r\nLabels.propTypes = {\r\n  value: PropTypes.string.isRequired,\r\n  labelColor: PropTypes.string,\r\n  labelBottom: PropTypes.bool,\r\n  labelFontSize: PropTypes.string,\r\n  valueFontSize: PropTypes.string,\r\n  appendToValue: PropTypes.string,\r\n  prependToValue: PropTypes.string,\r\n  verticalOffset: PropTypes.string,\r\n  hideLabelValue: PropTypes.bool,\r\n};\r\n\r\nexport default Labels;\r\n","import React, { useEffect, useReducer, useCallback, useRef } from \"react\";\r\nimport window from \"global\";\r\nimport PropTypes from \"prop-types\";\r\nimport reducer from \"../../store/reducers/circularSlider\";\r\nimport useEventListener from \"../../utils/hooks/useEventListener\";\r\nimport useIsServer from \"../../utils/hooks/useIsServer\";\r\nimport Knob from \"../components/Knob\";\r\nimport Svg from \"../components/Svg\";\r\nimport Labels from \"../components/Labels\";\r\n\r\nconst spreadDegrees = 360;\r\nconst knobOffset = {\r\n  top: Math.PI / 2,\r\n  right: 0,\r\n  bottom: -Math.PI / 2,\r\n  left: -Math.PI,\r\n};\r\n\r\nconst getSliderRotation = (number) => {\r\n  if (number < 0) return -1;\r\n  return 1;\r\n};\r\n\r\nconst getRadians = (degrees) => {\r\n  return (degrees * Math.PI) / 180;\r\n};\r\n\r\nconst generateRange = (min, max) => {\r\n  let rangeOfNumbers = [];\r\n  for (let i = min; i <= max; i++) {\r\n    rangeOfNumbers.push(i);\r\n  }\r\n  return rangeOfNumbers;\r\n};\r\n\r\nconst styles = {\r\n  circularSlider: {\r\n    position: \"relative\",\r\n    display: \"inline-block\",\r\n    opacity: 0,\r\n    transition: \"opacity 1s ease-in\",\r\n  },\r\n\r\n  mounted: {\r\n    opacity: 1,\r\n  },\r\n};\r\n\r\nconst CircularSlider = ({\r\n  label = \"ANGLE\",\r\n  width = 280,\r\n  direction = 1,\r\n  min = 0,\r\n  max = 360,\r\n  knobColor = \"#4e63ea\",\r\n  knobSize = 36,\r\n  knobPosition = \"top\",\r\n  labelColor = \"#272b77\",\r\n  labelBottom = false,\r\n  labelFontSize = \"1rem\",\r\n  valueFontSize = \"3rem\",\r\n  appendToValue = \"\",\r\n  prependToValue = \"\",\r\n  verticalOffset = \"1.5rem\",\r\n  hideLabelValue = false,\r\n  hideKnob = false,\r\n  knobDraggable = true,\r\n  progressColorFrom = \"#80C3F3\",\r\n  progressColorTo = \"#4990E2\",\r\n  progressSize = 8,\r\n  trackColor = \"#DDDEFB\",\r\n  trackSize = 8,\r\n  data = [],\r\n  dataIndex = 0,\r\n  progressLineCap = \"round\",\r\n  renderLabelValue = null,\r\n  onChange = (value) => {},\r\n}) => {\r\n  const initialState = {\r\n    mounted: false,\r\n    isDragging: false,\r\n    width: width,\r\n    radius: width / 2,\r\n    knobPosition: knobPosition,\r\n    label: 0,\r\n    data: data,\r\n    radians: 0,\r\n    offset: 0,\r\n    knob: {\r\n      x: 0,\r\n      y: 0,\r\n    },\r\n    dashFullArray: 0,\r\n    dashFullOffset: 0,\r\n  };\r\n  const isServer = useIsServer();\r\n  const [state, dispatch] = useReducer(reducer, initialState);\r\n  const circularSlider = useRef(null);\r\n  const svgFullPath = useRef(null);\r\n  const touchSupported = !isServer && \"ontouchstart\" in window;\r\n  const SLIDER_EVENT = {\r\n    DOWN: touchSupported ? \"touchstart\" : \"mousedown\",\r\n    UP: touchSupported ? \"touchend\" : \"mouseup\",\r\n    MOVE: touchSupported ? \"touchmove\" : \"mousemove\",\r\n  };\r\n\r\n  const setKnobPosition = useCallback(\r\n    (radians) => {\r\n      const radius = state.radius - trackSize / 2;\r\n      const offsetRadians = radians + knobOffset[knobPosition];\r\n      let degrees =\r\n        (offsetRadians > 0 ? offsetRadians : 2 * Math.PI + offsetRadians) *\r\n        (spreadDegrees / (2 * Math.PI));\r\n      // change direction\r\n      const dashOffset = (degrees / spreadDegrees) * state.dashFullArray;\r\n      degrees =\r\n        getSliderRotation(direction) === -1 ? spreadDegrees - degrees : degrees;\r\n\r\n      const pointsInCircle = (state.data.length - 1) / spreadDegrees;\r\n      const currentPoint = Math.round(degrees * pointsInCircle);\r\n\r\n      if (state.data[currentPoint] !== state.label) {\r\n        // props callback for parent\r\n        onChange(state.data[currentPoint]);\r\n      }\r\n\r\n      dispatch({\r\n        type: \"setKnobPosition\",\r\n        payload: {\r\n          dashFullOffset:\r\n            getSliderRotation(direction) === -1\r\n              ? dashOffset\r\n              : state.dashFullArray - dashOffset,\r\n          label: state.data[currentPoint],\r\n          knob: {\r\n            x: radius * Math.cos(radians) + radius,\r\n            y: radius * Math.sin(radians) + radius,\r\n          },\r\n        },\r\n      });\r\n    },\r\n    [\r\n      state.dashFullArray,\r\n      state.radius,\r\n      state.data,\r\n      state.label,\r\n      knobPosition,\r\n      trackSize,\r\n      direction,\r\n      onChange,\r\n    ]\r\n  );\r\n\r\n  const onMouseDown = () => {\r\n    dispatch({\r\n      type: \"onMouseDown\",\r\n      payload: {\r\n        isDragging: true,\r\n      },\r\n    });\r\n  };\r\n\r\n  const onMouseUp = () => {\r\n    dispatch({\r\n      type: \"onMouseUp\",\r\n      payload: {\r\n        isDragging: false,\r\n      },\r\n    });\r\n  };\r\n\r\n  const onMouseMove = useCallback(\r\n    (event) => {\r\n      if (!state.isDragging) return;\r\n\r\n      event.preventDefault();\r\n\r\n      let touch;\r\n      if (event.type === \"touchmove\") {\r\n        touch = event.changedTouches[0];\r\n      }\r\n\r\n      const offsetRelativeToDocument = (ref) => {\r\n        const rect = ref.current.getBoundingClientRect();\r\n        const scrollLeft =\r\n          !isServer &&\r\n          ((window?.pageXOffset ?? 0) ||\r\n            (document?.documentElement?.scrollLeft ?? 0));\r\n        const scrollTop =\r\n          !isServer &&\r\n          ((window?.pageYOffset ?? 0) ||\r\n            (document?.documentElement?.scrollTop ?? 0));\r\n        return { top: rect.top + scrollTop, left: rect.left + scrollLeft };\r\n      };\r\n\r\n      const mouseXFromCenter =\r\n        (event.type === \"touchmove\" ? touch.pageX : event.pageX) -\r\n        (offsetRelativeToDocument(circularSlider).left + state.radius);\r\n      const mouseYFromCenter =\r\n        (event.type === \"touchmove\" ? touch.pageY : event.pageY) -\r\n        (offsetRelativeToDocument(circularSlider).top + state.radius);\r\n\r\n      const radians = Math.atan2(mouseYFromCenter, mouseXFromCenter);\r\n      setKnobPosition(radians);\r\n    },\r\n    [state.isDragging, state.radius, setKnobPosition, isServer]\r\n  );\r\n\r\n  // Get svg path length onmount\r\n  useEffect(() => {\r\n    dispatch({\r\n      type: \"init\",\r\n      payload: {\r\n        mounted: true,\r\n        data: state.data.length\r\n          ? [...state.data]\r\n          : [...generateRange(min, max)],\r\n        dashFullArray: svgFullPath.current.getTotalLength\r\n          ? svgFullPath.current.getTotalLength()\r\n          : 0,\r\n      },\r\n    });\r\n    // eslint-disable-next-line\r\n  }, [max, min]);\r\n\r\n  // Set knob position\r\n  useEffect(() => {\r\n    const dataArrayLength = state.data.length;\r\n    const knobPositionIndex =\r\n      dataIndex > dataArrayLength - 1 ? dataArrayLength - 1 : dataIndex;\r\n\r\n    if (!!dataArrayLength) {\r\n      const pointsInCircle = spreadDegrees / dataArrayLength;\r\n      const offset = getRadians(pointsInCircle) / 2;\r\n\r\n      dispatch({\r\n        type: \"setInitialKnobPosition\",\r\n        payload: {\r\n          radians: Math.PI / 2 - knobOffset[state.knobPosition],\r\n          offset,\r\n        },\r\n      });\r\n\r\n      if (knobPositionIndex) {\r\n        const degrees =\r\n          getSliderRotation(direction) * knobPositionIndex * pointsInCircle;\r\n        const radians = getRadians(degrees) - knobOffset[state.knobPosition];\r\n\r\n        return setKnobPosition(radians + offset * getSliderRotation(direction));\r\n      }\r\n      setKnobPosition(\r\n        -(knobOffset[state.knobPosition] * getSliderRotation(direction)) +\r\n          offset * getSliderRotation(direction)\r\n      );\r\n    }\r\n\r\n    // eslint-disable-next-line\r\n  }, [\r\n    state.dashFullArray,\r\n    state.knobPosition,\r\n    state.data.length,\r\n    dataIndex,\r\n    direction,\r\n  ]);\r\n\r\n  useEventListener(SLIDER_EVENT.MOVE, onMouseMove);\r\n  useEventListener(SLIDER_EVENT.UP, onMouseUp);\r\n\r\n  const sanitizedLabel = label.replace(/[\\W_]/g, \"_\");\r\n\r\n  return (\r\n    <div\r\n      style={{ ...styles.circularSlider, ...(state.mounted && styles.mounted) }}\r\n      ref={circularSlider}\r\n    >\r\n      <Svg\r\n        width={width}\r\n        label={sanitizedLabel}\r\n        direction={direction}\r\n        strokeDasharray={state.dashFullArray}\r\n        strokeDashoffset={state.dashFullOffset}\r\n        svgFullPath={svgFullPath}\r\n        progressSize={progressSize}\r\n        progressColorFrom={progressColorFrom}\r\n        progressColorTo={progressColorTo}\r\n        progressLineCap={progressLineCap}\r\n        trackColor={trackColor}\r\n        trackSize={trackSize}\r\n        radiansOffset={state.radians}\r\n      />\r\n      {knobDraggable && (\r\n        <Knob\r\n          isDragging={state.isDragging}\r\n          knobPosition={{ x: state.knob.x, y: state.knob.y }}\r\n          knobSize={knobSize}\r\n          knobColor={knobColor}\r\n          trackSize={trackSize}\r\n          hideKnob={hideKnob}\r\n          onMouseDown={onMouseDown}\r\n        ></Knob>\r\n      )}\r\n      {renderLabelValue || (\r\n        <Labels\r\n          label={label}\r\n          labelColor={labelColor}\r\n          labelBottom={labelBottom}\r\n          labelFontSize={labelFontSize}\r\n          verticalOffset={verticalOffset}\r\n          valueFontSize={valueFontSize}\r\n          appendToValue={appendToValue}\r\n          prependToValue={prependToValue}\r\n          hideLabelValue={hideLabelValue}\r\n          value={`${state.label}`}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nCircularSlider.propTypes = {\r\n  label: PropTypes.string,\r\n  width: PropTypes.number,\r\n  direction: PropTypes.number,\r\n  min: PropTypes.number,\r\n  max: PropTypes.number,\r\n  knobColor: PropTypes.string,\r\n  knobPosition: PropTypes.string,\r\n  hideKnob: PropTypes.bool,\r\n  knobDraggable: PropTypes.bool,\r\n  labelColor: PropTypes.string,\r\n  labelBottom: PropTypes.bool,\r\n  labelFontSize: PropTypes.string,\r\n  valueFontSize: PropTypes.string,\r\n  appendToValue: PropTypes.string,\r\n  renderLabelValue: PropTypes.element,\r\n  prependToValue: PropTypes.string,\r\n  verticalOffset: PropTypes.string,\r\n  hideLabelValue: PropTypes.bool,\r\n  progressLineCap: PropTypes.string,\r\n  progressColorFrom: PropTypes.string,\r\n  progressColorTo: PropTypes.string,\r\n  progressSize: PropTypes.number,\r\n  trackColor: PropTypes.string,\r\n  trackSize: PropTypes.number,\r\n  data: PropTypes.array,\r\n  dataIndex: PropTypes.number,\r\n  onChange: PropTypes.func,\r\n};\r\n\r\nexport default CircularSlider;\r\n","import * as React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nlet ColumnContainer = styled.div`\r\n\twidth: 100%;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n`;\r\nlet RowContainer = styled.div`\r\n\twidth: 100%;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n`;\r\nlet MeasureIndicator = styled.div`\r\n\tfont-weight: 500;\r\n\tfont-size: 18px;\r\n\tcolor: #fff;\r\n\tborder-radius: 66px;\r\n\toutline: none;\r\n\tborder: none;\r\n\tpadding: 10px 60px;\r\n\tbackground-color: rgba(150, 150, 150, 0.2);\r\n\tmargin: 0px 10px;\r\n`;\r\nlet StyledButton = styled.button`\r\n\tfont-weight: 900;\r\n\twidth: 10%;\r\n\tfont-size: 48px;\r\n\tline-height: 48px;\r\n\tcolor: #fff;\r\n\toutline: none;\r\n\tborder: none;\r\n\tbackground-color: transparent;\r\n\tmargin: 0px 10px;\r\n`;\r\nexport interface MetronomeMeasureButtonsProps {\r\n\tbeatsPerMeasure: number;\r\n\tsetBeatsPerMeasure: (beatsPerMeasure: number) => void;\r\n\tplayMetronome: () => 'stop' | 'play';\r\n\tisPlaying: boolean;\r\n}\r\n\r\nconst MetronomeMeasureButtons: React.FunctionComponent<MetronomeMeasureButtonsProps> = ({\r\n\tbeatsPerMeasure,\r\n\tsetBeatsPerMeasure,\r\n\tplayMetronome,\r\n\tisPlaying\r\n}) => {\r\n\treturn (\r\n\t\t<ColumnContainer>\r\n\t\t\t<h2 style={{ textAlign: 'center' }}>Beats</h2>\r\n\t\t\t<RowContainer>\r\n\t\t\t\t<StyledButton\r\n\t\t\t\t\tstyle={{ marginTop: -10 }}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tif (beatsPerMeasure > 1)\r\n\t\t\t\t\t\t\tsetBeatsPerMeasure(beatsPerMeasure - 1);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t-\r\n\t\t\t\t</StyledButton>\r\n\t\t\t\t<MeasureIndicator>{beatsPerMeasure}</MeasureIndicator>\r\n\t\t\t\t<StyledButton\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tif (beatsPerMeasure < 12)\r\n\t\t\t\t\t\t\tsetBeatsPerMeasure(beatsPerMeasure + 1);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t+\r\n\t\t\t\t</StyledButton>\r\n\t\t\t</RowContainer>\r\n\t\t\t<StyledButton\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tfontSize: 24,\r\n\t\t\t\t\tmarginBottom: '-50px',\r\n\t\t\t\t\twidth: 'auto',\r\n\t\t\t\t\tborderRadius: 66,\r\n\t\t\t\t\toutline: 'none',\r\n\t\t\t\t\tpadding: '10px 60px',\r\n\t\t\t\t\ttextAlign: 'center',\r\n\t\t\t\t}}\r\n\t\t\t\tonClick={() => {\r\n\t\t\t\t\tplayMetronome();\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t{isPlaying === true? 'Stop' : 'Start'}\r\n\t\t\t</StyledButton>\r\n\t\t</ColumnContainer>\r\n\t);\r\n};\r\n\r\nexport default MetronomeMeasureButtons;\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"#fff\",\n  d: \"M81.482,45.875c-0.407,0-1.44,0.14-2.502,0.47c-0.271-3.613-3.299-6.47-6.98-6.47 c-1.657,0-3.182,0.579-4.382,1.545c-0.887-2.708-3.232-4.545-6.136-4.545c-1.923,0-3.634,0.791-4.854,2.083l-0.308-8.615 c3.414-2.452,5.644-6.453,5.644-10.968c0-7.444-6.056-13.5-13.5-13.5s-13.5,6.056-13.5,13.5c0,5.176,2.938,9.662,7.226,11.924 l0.452,21.133c-0.808,0.439-2.034,1.242-3.603,2.667c-5.429,4.934-7.206,16.868-1.075,26.105 c6.825,10.282,14.822,14.671,26.742,14.671c12.629,0,16.854-6.338,20.1-12.83c3.122-6.244,3.158-30.156,3.158-31.17 C87.965,48.678,84.936,45.875,81.482,45.875z M37.965,19.375c0-5.79,4.71-10.5,10.5-10.5s10.5,4.71,10.5,10.5 c0,2.732-1.064,5.207-2.783,7.075l-0.217-6.075c0-4.276-3.011-7.5-7.004-7.5s-7.004,3.224-7.004,7.532l0.156,7.291 C39.602,25.779,37.965,22.772,37.965,19.375z M82.123,81.703c-3.056,6.112-6.475,11.172-17.416,11.172 c-10.936,0-17.959-3.862-24.242-13.33c-3.661-5.516-5.25-16.916,0.593-22.227c0.631-0.573,1.188-1.022,1.66-1.371l0.224,10.459 c0.018,0.828,0.678,1.507,1.532,1.468c0.828-0.018,1.485-0.703,1.468-1.532l-0.984-45.967c0-2.649,1.646-4.5,4.004-4.5 s4.004,1.851,4.005,4.554l1,28c0.027,0.769,0.633,1.393,1.4,1.443c0.751,0.047,1.449-0.488,1.578-1.247l0.759-4.5 c0.014-0.083,0.021-0.166,0.021-0.25c0-2.28,1.616-4,3.759-4c2.417,0,3.518,2.073,3.518,4v3c0,0.829,0.672,1.5,1.5,1.5 s1.5-0.671,1.5-1.5c0-2.206,1.794-4,4-4s4,1.794,4,4v6.5c0,0.828,0.672,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3.82 c0.6-0.292,1.776-0.681,2.482-0.681c1.79,0,3.482,1.458,3.482,3C84.965,58.591,84.453,77.043,82.123,81.703z\"\n});\n\nfunction SvgTap(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Layer_1\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    x: \"0px\",\n    y: \"0px\",\n    width: \"120px\",\n    height: \"100px\",\n    viewBox: \"0 0 120 100\",\n    enableBackground: \"new 0 0 120 100\",\n    xmlSpace: \"preserve\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgTap);\nexport default __webpack_public_path__ + \"static/media/Tap.77de1002.svg\";\nexport { ForwardRef as ReactComponent };","import * as React from 'react';\r\nimport CircularSlider from '../../../common/containers/CircularSlider';\r\nimport styled, { css, keyframes } from 'styled-components';\r\nimport MetronomeMeasureButton from './MetronomeMeasureButtons';\r\nimport { IMetronomeProps } from '../../../types/Interfaces';\r\nimport { ReactComponent as TapIcon } from '../../../assets/icons/Tap.svg';\r\nlet Container = styled.div`\r\n\twidth: 100%;\r\n\theight: 90%;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tpadding-top: 20%;\r\n\tjustify-content: space-around;\r\n\talign-items: center;\r\n\tmargin-top: -120px;\r\n\r\n\t@media (max-width: 500px) {\r\n\t\tpadding-top: 25%;\r\n\t}\r\n`;\r\nconst hvrBackPulseKeyframes = keyframes`\r\n    10% {\r\n        transform: scale(0.9) translateY(-10px)\r\n    }\r\n\t100%{\r\n\t\ttransform: scale(1)\r\n\t}\r\n`;\r\nconst hvrBackPulseAnimation = css`\r\n  -webkit-animation: ${hvrBackPulseKeyframes} 0.8s linear infinite;\r\n  animation: ${hvrBackPulseKeyframes} 0.8s linear infinite;\r\n`;\r\nlet StyledTapIcon = styled(TapIcon)`\r\n\t${hvrBackPulseAnimation}\r\n`;\r\nconst Metronome: React.FunctionComponent<IMetronomeProps> = ({\r\n\tbeatsPerMeasure,\r\n\thandleSliderInputChange,\r\n\tprimaryColor,\r\n\tsetBeatsPerMeasure,\r\n\ttempo,\r\n\tplay,\r\n\tsetNoteType,\r\n\thandleTapTempo,\r\n\tisPlaying,\r\n\ttapTempoActive\r\n}) => {\r\n\treturn (\r\n\t\t<Container\r\n\t\t\tonMouseDown={() => handleTapTempo('press')}\r\n\t\t\tonMouseUp={() => handleTapTempo('release')}\r\n\t\t\tonTouchStart={() => handleTapTempo('press')}\r\n\t\t\tonTouchEnd={() => handleTapTempo('release')}\r\n\t\t>\r\n\t\t\t<CircularSlider\r\n\t\t\t\tlabel='Tempo'\r\n\t\t\t\tlabelColor={primaryColor}\r\n\t\t\t\tlabelFontSize='0px'\r\n\t\t\t\tvalueFontSize={'100px'}\r\n\t\t\t\tverticalOffset={'2rem'}\r\n\t\t\t\tprogressColorFrom={primaryColor}\r\n\t\t\t\tprogressColorTo={primaryColor}\r\n\t\t\t\tprogressSize={35}\r\n\t\t\t\tknobColor='#777777'\r\n\t\t\t\tknobSize={85}\r\n\t\t\t\ttrackColor='#96969633'\r\n\t\t\t\ttrackSize={35}\r\n\t\t\t\twidth={320}\r\n\t\t\t\tdata={[...Array(261).keys()].slice(30)}\r\n\t\t\t\tdataIndex={tempo - 30}\r\n\t\t\t\tonChange={(value: string) => {\r\n\t\t\t\t\thandleSliderInputChange(parseInt(value));\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t\t{tapTempoActive ? <StyledTapIcon style={{height: '80px'}}/> : <MetronomeMeasureButton\r\n\t\t\t\tisPlaying={isPlaying}\r\n\t\t\t\tbeatsPerMeasure={beatsPerMeasure}\r\n\t\t\t\tsetBeatsPerMeasure={setBeatsPerMeasure}\r\n\t\t\t\tplayMetronome={play}\r\n\t\t\t/>}\r\n\t\t</Container>\r\n\t);\r\n};\r\n\r\nexport default Metronome;\r\n","import * as React from 'react';\r\n// @ts-ignore\r\nimport MetronomeLogic from '../../utils/workers/MetronomeScheduler.worker';\r\nimport TapTempoWorker from '../../utils/workers/DetectTapTempo.worker';\r\nimport { wrap } from 'comlink';\r\nimport { AudioContext } from 'standardized-audio-context';\r\nimport Metronome from './components/Metronome';\r\nimport {\r\n\tIMetronomeContainerState,\r\n\tIMetronomeContainerProps,\r\n} from '../../types/Interfaces';\r\nimport Header from '../../common/components/Header';\r\n\r\nclass MetronomeContainer extends React.Component<\r\n\tIMetronomeContainerProps,\r\n\tIMetronomeContainerState\r\n> {\r\n\ttempoValuesArray: number[];\r\n\tcomlinkWorkerApi: any;\r\n\tcomlinkWorkerInstance: Worker;\r\n\tconstructor(props: IMetronomeContainerProps) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tbeatsPerMeasure: 4,\r\n\t\t\ttempo: 60,\r\n\t\t\tisPlaying: false,\r\n\t\t\tstartTime: null,\r\n\t\t\tcurrent16thNote: 0,\r\n\t\t\tlookahead: 25,\r\n\t\t\tscheduleAheadTime: 0.1,\r\n\t\t\tnextNoteTime: 0.0,\r\n\t\t\tnoteResolution: 2, // 0 = 16th note, 1 = 8th note, 2 = 4th note\r\n\t\t\tnoteLength: 0.05,\r\n\t\t\tnotesInQueue: [],\r\n\t\t\taudioContext: new AudioContext(),\r\n\t\t\ttimerWorker: new MetronomeLogic(),\r\n\t\t\ttapTempoActive: false,\r\n\t\t};\r\n\t\tthis.setBeatsPerMeasure = this.setBeatsPerMeasure.bind(this);\r\n\t\tthis.cycleNoteType = this.cycleNoteType.bind(this);\r\n\t\tthis.nextNote = this.nextNote.bind(this);\r\n\t\tthis.scheduleNote = this.scheduleNote.bind(this);\r\n\t\tthis.scheduler = this.scheduler.bind(this);\r\n\t\tthis.play = this.play.bind(this);\r\n\t\tthis.handleSliderInputChange = this.handleSliderInputChange.bind(this);\r\n\t\tthis.handleStartTapTempo = this.handleStartTapTempo.bind(this);\r\n\t\tthis.handleTempoTap = this.handleTempoTap.bind(this);\r\n\t\tthis.tempoValuesArray = [...Array(261).keys()].slice(30);\r\n\t\tthis.comlinkWorkerInstance = new TapTempoWorker();\r\n\t\tthis.comlinkWorkerApi = wrap(this.comlinkWorkerInstance);\r\n\t\t\r\n\t}\r\n\tsetBeatsPerMeasure(beatsPerMeasure: number) {\r\n\t\tthis.setState({ beatsPerMeasure: beatsPerMeasure });\r\n\t\t// Metronome scheduler crashes when you set it to a high value and then decrease the beats per measure very quickly. It continues with infinity beats per measure\r\n\t\t// One quick option is to stop the metronome when adjusting beats per measure although it might be annoying\r\n\t\t// Second option is to create a check for if the current beats per minute are smaller than the current and to wait untill execution of the current run terminates\r\n\t\tthis.stop();\r\n\t}\r\n\tcycleNoteType() {\r\n\t\tthis.setState(prevState => ({\r\n\t\t\tnoteResolution: (prevState.noteResolution + 1) % 3,\r\n\t\t}));\r\n\t}\r\n\t// Calculates the time until the next note, and which 16th note the scheduler is at\r\n\tnextNote() {\r\n\t\tvar secondsPerBeat = 60 / this.state.tempo;\r\n\t\tthis.setState(prevState => {\r\n\t\t\treturn {\r\n\t\t\t\tnextNoteTime: prevState.nextNoteTime + 0.25 * secondsPerBeat,\r\n\t\t\t\tcurrent16thNote:\r\n\t\t\t\t\tprevState.current16thNote + 1 ===\r\n\t\t\t\t\t4 * this.state.beatsPerMeasure\r\n\t\t\t\t\t\t? 0\r\n\t\t\t\t\t\t: prevState.current16thNote + 1,\r\n\t\t\t};\r\n\t\t});\r\n\t}\r\n\t// Schedules the oscillator to play a certain note for a set time at a beat number\r\n\tscheduleNote(beatNumber: any, time: any) {\r\n\t\tlet notesInQueue = this.state.notesInQueue;\r\n\t\tnotesInQueue.push({ note: beatNumber, time: time });\r\n\r\n\t\tif (this.state.noteResolution === 1 && beatNumber % 2) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this.state.noteResolution === 2 && beatNumber % 4) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar osc = this.state.audioContext.createOscillator();\r\n\t\tosc.connect(this.state.audioContext.destination);\r\n\r\n\t\tif (beatNumber === 0)\r\n\t\t\t// beat 0 == high pitch\r\n\t\t\tosc.frequency.value = 880.0;\r\n\t\telse if (beatNumber % 4 === 0)\r\n\t\t\t// quarter notes = medium pitch\r\n\t\t\tosc.frequency.value = 440.0;\r\n\t\t// other 16th notes = low pitch\r\n\t\telse osc.frequency.value = 220.0;\r\n\r\n\t\tosc.start(time);\r\n\t\tosc.stop(time + this.state.noteLength);\r\n\t}\r\n\t// Schedules all notes before next interval\r\n\tscheduler() {\r\n\t\t// while there are notes that will need to play before the next interval,\r\n\t\t// schedule them and advance the pointer.\r\n\t\twhile (\r\n\t\t\tthis.state.nextNoteTime <\r\n\t\t\tthis.state.audioContext.currentTime + this.state.scheduleAheadTime\r\n\t\t) {\r\n\t\t\tthis.scheduleNote(\r\n\t\t\t\tthis.state.current16thNote,\r\n\t\t\t\tthis.state.nextNoteTime\r\n\t\t\t);\r\n\t\t\tthis.nextNote();\r\n\t\t}\r\n\t}\r\n\t// Start / Stop the metronome\r\n\tplay() {\r\n\t\tthis.setState(prevState => ({ isPlaying: !prevState.isPlaying }));\r\n\t\tif (!this.state.isPlaying) {\r\n\t\t\t// start playing\r\n\t\t\tthis.setState({\r\n\t\t\t\tcurrent16thNote: 0,\r\n\t\t\t\tnextNoteTime: this.state.audioContext.currentTime,\r\n\t\t\t});\r\n\t\t\tthis.state.timerWorker?.postMessage('start');\r\n\t\t\treturn 'stop';\r\n\t\t} else {\r\n\t\t\tthis.state.timerWorker?.postMessage('stop');\r\n\t\t\treturn 'play';\r\n\t\t}\r\n\t} // Stop the metronome\r\n\tstop() {\r\n\t\tthis.setState({ isPlaying: false });\r\n\t\tif (this.state.isPlaying) {\r\n\t\t\tthis.state.timerWorker?.postMessage('stop');\r\n\t\t\treturn 'play';\r\n\t\t}\r\n\t}\r\n\t// Set what happens when a message is received from the worker thread\r\n\tcomponentDidMount() {\r\n\t\tthis.comlinkWorkerInstance.addEventListener('message', ev => {\r\n\t\t\tif (ev.data && typeof ev.data === 'number') {\r\n\t\t\t\tthis.setState({ tempo: ev.data });\r\n\t\t\t\t// console.log('Tempo changed to ' + ev.data);\r\n\t\t\t}\r\n\t\t});\r\n\t\tlet timerWorker = this.state.timerWorker;\r\n\t\ttimerWorker.onmessage = e => {\r\n\t\t\tif (e.data === 'tick') {\r\n\t\t\t\r\n\t\t\t\tthis.scheduler();\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log(e.data);\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.setState({ timerWorker: timerWorker });\r\n\t\tthis.state.timerWorker.postMessage({ interval: this.state.lookahead });\r\n\t}\r\n\tshouldComponentUpdate(\r\n\t\tnextProps: Readonly<IMetronomeContainerProps>,\r\n\t\tnextState: Readonly<IMetronomeContainerState>\r\n\t) {\r\n\t\treturn nextState.beatsPerMeasure !== this.state.beatsPerMeasure ||\r\n\t\t\tnextState.noteResolution !== this.state.noteResolution ||\r\n\t\t\tnextState.tapTempoActive !== this.state.tapTempoActive ||\r\n\t\t\tnextState.tempo !== this.state.tempo ||\r\n\t\t\tnextProps.primaryColor !== this.props.primaryColor || nextState.isPlaying !== this.state.isPlaying\r\n\t\t\t? true\r\n\t\t\t: false;\r\n\t}\r\n\thandleTempoTap(action: string) {\r\n\t\tconsole.log('yoo')\r\n\t\tswitch (action) {\r\n\t\t\tcase 'press':\r\n\t\t\t\tconsole.log('press')\r\n\t\t\t\tthis.comlinkWorkerApi.press();\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'release':\r\n\t\t\t\tconsole.log('release')\r\n\t\t\t\tthis.comlinkWorkerApi.release();\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\thandleStartTapTempo(action: string) {\r\n\t\tswitch (action) {\r\n\t\t\tcase 'start':\r\n\t\t\t\tthis.setState(prevState => ({\r\n\t\t\t\t\ttapTempoActive: !prevState.tapTempoActive,\r\n\t\t\t\t}));\r\n\t\t\t\tthis.comlinkWorkerApi.start();\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'stop':\r\n\t\t\t\tthis.setState(prevState => ({\r\n\t\t\t\t\ttapTempoActive: !prevState.tapTempoActive,\r\n\t\t\t\t}));\r\n\t\t\t\tthis.comlinkWorkerApi.stop();\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\thandleSliderInputChange(value: number) {\r\n\t\tthis.setState({ tempo: value });\r\n\t}\r\n\trender() {\r\n\t\tconst { tempo, tapTempoActive } = this.state;\r\n\t\treturn (\r\n\t\t\t<React.Fragment>\r\n\t\t\t\t<Header\r\n\t\t\t\t\tnavigateLocation={'/'}\r\n\t\t\t\t\tsetColors={this.props.setColors}\r\n\t\t\t\t\tmenuColor={this.props.currentColors.gradient_lighter}\r\n\t\t\t\t\thandleStartTapTempo={this.handleStartTapTempo}\r\n\t\t\t\t\ttapTempoActive={tapTempoActive}\r\n\t\t\t\t\tcycleNoteType={this.cycleNoteType}\r\n\t\t\t\t/>\r\n\t\t\t\t<Metronome\r\n\t\t\t\t\tbeatsPerMeasure={this.state.beatsPerMeasure}\r\n\t\t\t\t\thandleSliderInputChange={this.handleSliderInputChange}\r\n\t\t\t\t\thandleTapTempo={this.handleTempoTap}\r\n\t\t\t\t\tplay={this.play}\r\n\t\t\t\t\tprimaryColor={this.props.primaryColor}\r\n\t\t\t\t\tsetBeatsPerMeasure={this.setBeatsPerMeasure}\r\n\t\t\t\t\tsetNoteType={this.cycleNoteType}\r\n\t\t\t\t\ttempo={tempo}\r\n\t\t\t\t\tisPlaying={this.state.isPlaying}\r\n\t\t\t\t\ttapTempoActive={tapTempoActive}\r\n\t\t\t\t/>\r\n\t\t\t</React.Fragment>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default MetronomeContainer;\r\n"],"sourceRoot":""}