{"version":3,"sources":["assets/icons/Metronome.svg","assets/icons/settings.svg","utils/hooks/useOutsideClickAlert.ts","common/components/Header.tsx","types/tunings.d.ts","types/colors.d.ts","utils/functions.ts","utils/wasmLoader.ts","utils/detectors.ts","assets/icons/Wave.svg","pages/tuner/components/Ruler.tsx","pages/tuner/components/StringBeingTuned.tsx","pages/tuner/components/Button.tsx","pages/tuner/components/TuningSelectionButtons.tsx","utils/hooks/useHorizontalScroll.ts","pages/tuner/components/Tuner.tsx","utils/context.ts","pages/tuner/TunerContainer.tsx"],"names":["_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","d","fill","SvgMetronome","_ref","svgRef","title","titleId","props","width","height","viewBox","xmlns","ref","id","ForwardRef","SvgSettings","useOutsideAlerter","callback","useEffect","handleClickOutside","event","current","contains","document","addEventListener","removeEventListener","HeaderContainer","styled","div","Branding","h1","DropDown","DropDownItem","StyledMetronomeSVG","Metronome","StyledSettingsSvg","Settings","Header","setColors","navigateLocation","menuColor","handleStartTapTempo","cycleNoteType","tapTempoActive","toggleChromaticMode","chromaticMode","React","showMenu","setShowMenu","dropDownRef","location","useLocation","colors","pathname","primary","gradient_darker","gradient_lighter","to","style","display","alignItems","position","right","outline","border","background","padding","onClick","className","opacity","zIndex","undefined","Tunings","Standard","frequencies","string_1","string_2","string_3","string_4","string_5","string_6","letters","DADGAD","A","B","C","D","E","F","G","getProperty","o","propertyName","noteFromPitch","frequency","noteNum","Math","log","round","loadYinWasm","instantiateStreaming","fetch","then","exports","YinDetector","arrayValues","setAcceptanceThreshold","sampleRate","probabilityThreshold","pInput","__retain","__newArray","Float32AudioBuffer_ID","pOutput","getPitch","__release","ACDetector","autocorellation","YIN","result","catch","e","console","_ref3","cx","cy","r","gradientUnits","gradientTransform","stopColor","offset","SvgWave","preserveAspectRatio","RulerContainer","Ruler","rulerGradings","gradingColors","rulerTranslate","controls","useAnimation","start","translateX","transition","duration","animate","backgroundColor","StyledContainer","Superscript","sup","Note","color","Frequency","p","StringBeingTuned","note","split","renderedNote","noteProps","toggleLiveInput","StyledButton","motion","button","Button","selected","children","prevprops","nextprops","tunings","TuningSelectionButtons","scrollRef","elRef","useRef","el","onWheel","deltaY","scrollLeft","scrollWidth","clientWidth","preventDefault","scrollTo","left","behavior","useHorizontalScroll","setSelected","buttons","map","tuning","index","isSelected","visibility","isChromaticMode","SVGContainer","StyledWaveSvg","Wave","color_1","color_2","Tuner","handleTuningSelection","currentStringBeingTuned","startOscillator","currentColors","rulerDivs","tuningIndication","timeToCompute","currentNote","justifyContent","flexDirection","letter","top","fontWeight","fontSize","textAlign","bottom","context","TunerContainer","yinDetector","state","analyser","audioContext","buffer","Float32Array","mediaStreamSource","oscillatorNode","isPlaying","requestAnimationFrameID","currentTuning","windowWidth","rulerDistanceBetweenGradings","sameFrequencyCounter","isChromatic","gotStream","bind","findPitch","findPitchWithYIN","liveInput","oscillator","liveInputModePicker","window","min","body","documentElement","offsetWidth","setState","prevState","stream","liveInputModeCallback","volume","newAnalyser","fftSize","createGain","gain","value","createMediaStreamSource","connect","getFloatTimeDomainData","ac","t0","performance","now","yin","t1","pitch","absoluteDiffOfFreq","abs","rafID","requestAnimationFrame","setStringCurrentlyBeingTuned","rms","size","val","sqrt","r1","r2","slice","c","Array","j","maxval","maxpos","x1","x2","x3","a","floor","setColorsFromNote","getColorFromNote","setTimeout","closestLetter","tuningFrequencies","tuningLetters","detectedFreq","maxDifference","minIndex","values","stringFreq","diff","determineStringBeingTuned","liveInputMode","stop","cancelAnimationFrame","AudioContext","createAnalyser","navigator","mediaDevices","getUserMedia","audio","autoGainControl","noiseSuppression","err","createOscillator","destination","oscillatorFreq","setValueAtTime","currentTime","setInterval","line","translationDistanceToLastLine","clampRulerToWindowCondition","signOfDifference","Provider","Fragment","Component","contextType"],"mappings":"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","file":"static/js/5.9d9abdcb.chunk.js","sourcesContent":["function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M14.5 0.989563L8.64046 2.56123L0.935874 31.3637C0.884624 31.62 0.833374 31.8933 0.833374 32.1666C0.833374 34.0629 2.35379 35.5833 4.25004 35.5833H24.75C26.6463 35.5833 28.1667 34.0629 28.1667 32.1666C28.1667 31.8933 28.1155 31.62 28.0642 31.3637L25.7409 22.6341L23.0417 25.3333L23.3834 27.0416H16.9088L21.7605 22.19L19.3517 19.7812L12.0913 27.0416H5.61671L11.5788 4.83331H17.4213L19.9155 14.1096L22.7 11.3079L20.3596 2.56123L14.5 0.989563ZM13.2188 6.54165V23.1979L15.7813 20.6354V6.54165H13.2188ZM27.808 11.325L22.9734 16.1596L21.7605 14.9466L19.3517 17.3725L24.1692 22.19L26.595 19.7812L25.3821 18.5683L30.2167 13.7337L27.808 11.325Z\",\n  fill: \"current\"\n});\n\nfunction SvgMetronome(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 31,\n    height: 36,\n    viewBox: \"0 0 31 36\",\n    fill: \"current\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgMetronome);\nexport default __webpack_public_path__ + \"static/media/Metronome.bf2d0371.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M32.6975 22.1059C32.7659 21.5934 32.8 21.0638 32.8 20.5C32.8 19.9534 32.7659 19.4067 32.6804 18.8942L36.1484 16.195C36.4559 15.9559 36.5413 15.4946 36.3534 15.153L33.0734 9.48129C32.8684 9.10545 32.4413 8.98587 32.0654 9.10545L27.9825 10.7455C27.1284 10.0963 26.2229 9.54962 25.215 9.13962L24.6 4.80045C24.5317 4.39045 24.19 4.10004 23.78 4.10004H17.22C16.81 4.10004 16.4854 4.39045 16.4171 4.80045L15.8021 9.13962C14.7942 9.54962 13.8717 10.1134 13.0346 10.7455L8.95169 9.10545C8.57586 8.96879 8.14877 9.10545 7.94377 9.48129L4.68086 15.153C4.47586 15.5117 4.54419 15.9559 4.88586 16.195L8.35377 18.8942C8.26836 19.4067 8.20003 19.9705 8.20003 20.5C8.20003 21.0296 8.23419 21.5934 8.31961 22.1059L4.85169 24.805C4.54419 25.0442 4.45877 25.5055 4.64669 25.8471L7.92669 31.5188C8.13169 31.8946 8.55877 32.0142 8.93461 31.8946L13.0175 30.2546C13.8717 30.9038 14.7771 31.4505 15.785 31.8605L16.4 36.1996C16.4854 36.6096 16.81 36.9 17.22 36.9H23.78C24.19 36.9 24.5317 36.6096 24.5829 36.1996L25.1979 31.8605C26.2059 31.4505 27.1284 30.9038 27.9654 30.2546L32.0484 31.8946C32.4242 32.0313 32.8513 31.8946 33.0563 31.5188L36.3363 25.8471C36.5413 25.4713 36.4559 25.0442 36.1313 24.805L32.6975 22.1059ZM20.5 26.65C17.1175 26.65 14.35 23.8825 14.35 20.5C14.35 17.1175 17.1175 14.35 20.5 14.35C23.8825 14.35 26.65 17.1175 26.65 20.5C26.65 23.8825 23.8825 26.65 20.5 26.65Z\",\n  fill: \"current\"\n});\n\nfunction SvgSettings(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 36,\n    height: 36,\n    viewBox: \"0 0 36 36\",\n    fill: \"current\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSettings);\nexport default __webpack_public_path__ + \"static/media/settings.0131e546.svg\";\nexport { ForwardRef as ReactComponent };","import { useEffect } from 'react';\r\n\r\nconst useOutsideAlerter = (ref: any, callback: any) => {\r\n\tuseEffect(() => {\r\n\t\t/**\r\n\t\t * Alert if clicked on outside of element\r\n\t\t */\r\n\t\tfunction handleClickOutside(event: any) {\r\n\t\t\tif (ref.current && !ref.current.contains(event.target)) {\r\n\t\t\t\tcallback();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t// Bind the event listener\r\n\t\tdocument.addEventListener('mousedown', handleClickOutside);\r\n\t\treturn () => {\r\n\t\t\t// Unbind the event listener on clean up\r\n\t\t\tdocument.removeEventListener('mousedown', handleClickOutside);\r\n\t\t};\r\n\t}, [ref, callback]);\r\n};\r\n\r\nexport default useOutsideAlerter;\r\n","import * as React from 'react';\r\nimport styled from 'styled-components';\r\nimport { ReactComponent as Metronome } from '../../assets/icons/Metronome.svg';\r\nimport { ReactComponent as Settings } from '../../assets/icons/settings.svg';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport useOutsideAlerter from '../../utils/hooks/useOutsideClickAlert';\r\nlet HeaderContainer = styled.div`\r\n\theight: 10%;\r\n\twidth: 100%;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n`;\r\nlet Branding = styled.h1`\r\n\tfont-size: 18px;\r\n\tfont-weight: 500;\r\n\ttext-transform: uppercase;\r\n\tdisplay: inline-block;\r\n`;\r\nlet DropDown = styled.div`\r\n\tbackground-color: #202124;\r\n\tborder-width: 0;\r\n\tbox-shadow: 0 1px 2px 0 rgb(0 0 0 / 30%), 0 2px 6px 2px rgb(0 0 0 / 15%);\r\n\tposition: absolute;\r\n\ttop: 100%;\r\n\tright: 0;\r\n\twidth: 150px;\r\n\tz-index: 9999;\r\n\topacity: 0;\r\n\ttransition: opacity 0.2s;\r\n`;\r\nlet DropDownItem = styled.div`\r\n\tborder: 1px solid transparent;\r\n\tfont-size: 0.875rem;\r\n\tfont-weight: 400;\r\n\tpadding: 10px 15px;\r\n\tposition: relative;\r\n\tcolor: #333;\r\n\tcursor: pointer;\r\n\tmargin: 0;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\r\n\t& button {\r\n\t\tcursor: pointer;\r\n\t\tbackground: transparent;\r\n\t\tcolor: white;\r\n\t\tborder: none;\r\n\t\toutline: none;\r\n\t}\r\n\t&:hover {\r\n\t\tborder: 1px solid white;\r\n\t}\r\n`;\r\nlet StyledMetronomeSVG = styled(Metronome)`\r\n\tposition: absolute;\r\n\tleft: 30px;\r\n\ttransition: fill 0.2s;\r\n`;\r\nlet StyledSettingsSvg = styled(Settings)`\r\n\ttransition: all 0.2s;\r\n`;\r\nexport interface HeaderProps {\r\n\tnavigateLocation: string;\r\n\tmenuColor: string;\r\n\tsetColors: React.Dispatch<\r\n\t\tReact.SetStateAction<{\r\n\t\t\tprimary: string;\r\n\t\t\tgradient_darker: string;\r\n\t\t\tgradient_lighter: string;\r\n\t\t}>\r\n\t>;\r\n\thandleStartTapTempo?: (action: string) => void;\r\n\tcycleNoteType?: () => void;\r\n\ttapTempoActive?: boolean;\r\n\ttoggleChromaticMode?: () => void;\r\n\tchromaticMode?: () => void;\r\n}\r\n\r\nconst Header: React.FunctionComponent<HeaderProps> = ({\r\n\tsetColors,\r\n\tnavigateLocation,\r\n\tmenuColor,\r\n\thandleStartTapTempo,\r\n\tcycleNoteType,\r\n\ttapTempoActive,\r\n\ttoggleChromaticMode,\r\n\tchromaticMode,\r\n}) => {\r\n\tlet [showMenu, setShowMenu] = React.useState(false);\r\n\tlet dropDownRef = React.useRef(null);\r\n\r\n\tlet location = useLocation();\r\n\tReact.useEffect(() => {\r\n\t\tlet colors =\r\n\t\t\tlocation.pathname === '/'\r\n\t\t\t\t? {\r\n\t\t\t\t\t\tprimary: '#F72640',\r\n\t\t\t\t\t\tgradient_darker: '#0F0910',\r\n\t\t\t\t\t\tgradient_lighter: '#1F0E18',\r\n\t\t\t\t  }\r\n\t\t\t\t: {\r\n\t\t\t\t\t\tprimary: '#FFFFFF',\r\n\t\t\t\t\t\tgradient_darker: '#0F0F0F',\r\n\t\t\t\t\t\tgradient_lighter: '#282828',\r\n\t\t\t\t  };\r\n\t\tsetColors(colors);\r\n\t}, [location.pathname, setColors]);\r\n\tconst toggleMenu = () => {\r\n\t\tsetShowMenu(!showMenu);\r\n\t};\r\n\tconst hideMenu = () => {\r\n\t\tsetShowMenu(false);\r\n\t};\r\n\tconst renderDropdownItems = () => {\r\n\t\treturn location.pathname === '/' ? (\r\n\t\t\t<>\r\n\t\t\t\t<DropDownItem>\r\n\t\t\t\t\t<button>Tutorial</button>\r\n\t\t\t\t</DropDownItem>\r\n\t\t\t\t<DropDownItem>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tif (toggleChromaticMode && chromaticMode) {\r\n\t\t\t\t\t\t\t\ttoggleChromaticMode();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tChromatic Mode\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</DropDownItem>\r\n\t\t\t</>\r\n\t\t) : (\r\n\t\t\t<>\r\n\t\t\t\t<DropDownItem>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\thandleStartTapTempo &&\r\n\t\t\t\t\t\t\t\ttapTempoActive != undefined\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t!tapTempoActive\r\n\t\t\t\t\t\t\t\t\t? handleStartTapTempo('start')\r\n\t\t\t\t\t\t\t\t\t: handleStartTapTempo('stop');\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tTap Tempo\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</DropDownItem>\r\n\t\t\t\t<DropDownItem>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tif (cycleNoteType) cycleNoteType();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tNote Type\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</DropDownItem>\r\n\t\t\t</>\r\n\t\t);\r\n\t};\r\n\tuseOutsideAlerter(dropDownRef, hideMenu);\r\n\treturn (\r\n\t\t<HeaderContainer>\r\n\t\t\t<Link\r\n\t\t\t\tto={navigateLocation}\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\theight: '100%',\r\n\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\talignItems: 'center',\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<StyledMetronomeSVG\r\n\t\t\t\t\tfill={navigateLocation === '/' ? '#FFFFFF' : '#969696'}\r\n\t\t\t\t/>\r\n\t\t\t</Link>\r\n\r\n\t\t\t<Branding>Guitune</Branding>\r\n\t\t\t<div\r\n\t\t\t\tstyle={{ position: 'absolute', right: '30px' }}\r\n\t\t\t\tref={dropDownRef}\r\n\t\t\t>\r\n\t\t\t\t<button\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\toutline: 'none',\r\n\t\t\t\t\t\tborder: 'none',\r\n\t\t\t\t\t\tbackground: 'transparent',\r\n\t\t\t\t\t\tpadding: 0\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonClick={toggleMenu}\r\n\t\t\t\t>\r\n\t\t\t\t\t<StyledSettingsSvg\r\n\t\t\t\t\t\tfill={showMenu ? '#FFFFFF' : '#969696'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</button>\r\n\t\t\t\t<DropDown\r\n\t\t\t\t\tclassName='dropdown'\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tbackground: menuColor,\r\n\t\t\t\t\t\topacity: showMenu ? 1 : 0,\r\n\t\t\t\t\t\tzIndex: showMenu ? 9999 : -100,\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{renderDropdownItems()}\r\n\t\t\t\t</DropDown>\r\n\t\t\t</div>\r\n\t\t</HeaderContainer>\r\n\t);\r\n};\r\n\r\nexport default Header;\r\n","export interface Frequencies {\r\n\tstring_1: number;\r\n\tstring_2: number;\r\n\tstring_3: number;\r\n\tstring_4: number;\r\n\tstring_5: number;\r\n\tstring_6: number;\r\n}\r\nexport interface Letters {\r\n\tstring_1: string;\r\n\tstring_2: string;\r\n\tstring_3: string;\r\n\tstring_4: string;\r\n\tstring_5: string;\r\n\tstring_6: string;\r\n}\r\nexport interface Tuning {\r\n\tfrequencies: Frequencies;\r\n\tletters: Letters;\r\n}\r\nlet Standard: Tuning = {\r\n\tfrequencies: {\r\n\t\tstring_1: 82,\r\n\t\tstring_2: 110,\r\n\t\tstring_3: 146,\r\n\t\tstring_4: 196,\r\n\t\tstring_5: 246,\r\n\t\tstring_6: 329,\r\n\t},\r\n\tletters: {\r\n\t\tstring_1: 'E',\r\n\t\tstring_2: 'A',\r\n\t\tstring_3: 'D',\r\n\t\tstring_4: 'G',\r\n\t\tstring_5: 'B',\r\n\t\tstring_6: 'E',\r\n\t},\r\n};\r\nlet DropD: Tuning = {\r\n\tfrequencies: {\r\n\t\tstring_1: 73,\r\n\t\tstring_2: 110,\r\n\t\tstring_3: 146,\r\n\t\tstring_4: 196,\r\n\t\tstring_5: 246,\r\n\t\tstring_6: 329,\r\n\t},\r\n\tletters: {\r\n\t\tstring_1: 'D',\r\n\t\tstring_2: 'A',\r\n\t\tstring_3: 'D',\r\n\t\tstring_4: 'G',\r\n\t\tstring_5: 'B',\r\n\t\tstring_6: 'E',\r\n\t},\r\n};\r\nlet DoubleDropD: Tuning = {\r\n\tfrequencies: {\r\n\t\tstring_1: 73,\r\n\t\tstring_2: 110,\r\n\t\tstring_3: 146,\r\n\t\tstring_4: 196,\r\n\t\tstring_5: 246,\r\n\t\tstring_6: 293,\r\n\t},\r\n\tletters: {\r\n\t\tstring_1: 'D',\r\n\t\tstring_2: 'A',\r\n\t\tstring_3: 'D',\r\n\t\tstring_4: 'G',\r\n\t\tstring_5: 'B',\r\n\t\tstring_6: 'D',\r\n\t},\r\n};\r\nlet DADGAD: Tuning = {\r\n\tfrequencies: {\r\n\t\tstring_1: 73,\r\n\t\tstring_2: 110,\r\n\t\tstring_3: 146,\r\n\t\tstring_4: 196,\r\n\t\tstring_5: 220,\r\n\t\tstring_6: 293,\r\n\t},\r\n\tletters: {\r\n\t\tstring_1: 'D',\r\n\t\tstring_2: 'A',\r\n\t\tstring_3: 'D',\r\n\t\tstring_4: 'G',\r\n\t\tstring_5: 'A',\r\n\t\tstring_6: 'D',\r\n\t},\r\n};\r\nlet OpenD: Tuning = {\r\n\tfrequencies: {\r\n\t\tstring_1: 73,\r\n\t\tstring_2: 110,\r\n\t\tstring_3: 146,\r\n\t\tstring_4: 185,\r\n\t\tstring_5: 220,\r\n\t\tstring_6: 293,\r\n\t},\r\n\tletters: {\r\n\t\tstring_1: 'D',\r\n\t\tstring_2: 'A',\r\n\t\tstring_3: 'D',\r\n\t\tstring_4: 'F#',\r\n\t\tstring_5: 'A',\r\n\t\tstring_6: 'D',\r\n\t},\r\n};\r\nlet OpenE: Tuning = {\r\n\tfrequencies: {\r\n\t\tstring_1: 82,\r\n\t\tstring_2: 123,\r\n\t\tstring_3: 164,\r\n\t\tstring_4: 207,\r\n\t\tstring_5: 246,\r\n\t\tstring_6: 329,\r\n\t},\r\n\tletters: {\r\n\t\tstring_1: 'E',\r\n\t\tstring_2: 'B',\r\n\t\tstring_3: 'E',\r\n\t\tstring_4: 'G#',\r\n\t\tstring_5: 'B',\r\n\t\tstring_6: 'E',\r\n\t},\r\n};\r\nlet OpenG: Tuning = {\r\n\tfrequencies: {\r\n\t\tstring_1: 73,\r\n\t\tstring_2: 98,\r\n\t\tstring_3: 146,\r\n\t\tstring_4: 185,\r\n\t\tstring_5: 246,\r\n\t\tstring_6: 293,\r\n\t},\r\n\tletters: {\r\n\t\tstring_1: 'D',\r\n\t\tstring_2: 'G',\r\n\t\tstring_3: 'D',\r\n\t\tstring_4: 'G',\r\n\t\tstring_5: 'B',\r\n\t\tstring_6: 'D',\r\n\t},\r\n};\r\nlet Tunings = {\r\n\tStandard: Standard,\r\n\t'Drop D': DropD,\r\n\t'Double Drop D': DoubleDropD,\r\n\tDADGAD: DADGAD,\r\n\t'Open D': OpenD,\r\n\t'Open E': OpenE,\r\n\t'Open G': OpenG,\r\n};\r\n\r\nexport default Tunings;\r\n","export interface ColorScheme {\r\n  primary: string;\r\n  gradient_lighter: string;\r\n  gradient_darker: string;\r\n}\r\nlet A: ColorScheme = {\r\n  primary: \"#F72640\",\r\n  gradient_lighter: \"#1F0E18\",\r\n  gradient_darker: \"#0F0910\",\r\n};\r\nlet B: ColorScheme = {\r\n  primary: \"#F79726\",\r\n  gradient_lighter: \"#1F170E\",\r\n  gradient_darker: \"#100C09\",\r\n};\r\nlet C: ColorScheme = {\r\n  primary: \"#F7C926\",\r\n  gradient_lighter: \"#1F1C0E\",\r\n  gradient_darker: \"#100F09\",\r\n};\r\nlet D: ColorScheme = {\r\n  primary: \"#26F761\",\r\n  gradient_lighter: \"#0E1F13\",\r\n  gradient_darker: \"#09100C\",\r\n};\r\nlet E: ColorScheme = {\r\n  primary: \"#269FF7\",\r\n  gradient_lighter: \"#0E191F\",\r\n  gradient_darker: \"#090D10\",\r\n};\r\nlet F: ColorScheme = {\r\n  primary: \"#5026F7\",\r\n  gradient_lighter: \"#100E1F\",\r\n  gradient_darker: \"#0B0910\",\r\n};\r\nlet G: ColorScheme = {\r\n  primary: \"#9B26F7\",\r\n  gradient_lighter: \"#180E1F\",\r\n  gradient_darker: \"#0D0910\",\r\n};\r\nexport interface ColorSchemes {\r\n  A: ColorScheme;\r\n  \"A#\": ColorScheme;\r\n  B: ColorScheme;\r\n  \"B#\": ColorScheme;\r\n  C: ColorScheme;\r\n  \"C#\": ColorScheme;\r\n  D: ColorScheme;\r\n  \"D#\": ColorScheme;\r\n  E: ColorScheme;\r\n  \"E#\": ColorScheme;\r\n  F: ColorScheme;\r\n  \"F#\": ColorScheme;\r\n  G: ColorScheme;\r\n  \"G#\": ColorScheme;\r\n}\r\nlet colors: ColorSchemes = {\r\n  A: A,\r\n  \"A#\": A,\r\n  B: B,\r\n  \"B#\": B,\r\n  C: C,\r\n  \"C#\": C,\r\n  D: D,\r\n  \"D#\": D,\r\n  E: E,\r\n  \"E#\": E,\r\n  F: F,\r\n  \"F#\": F,\r\n  G: G,\r\n  \"G#\": G,\r\n};\r\nexport default colors;\r\n","import * as React from 'react';\r\nimport Tunings, { Letters, Frequencies } from '../types/tunings.d';\r\nimport colors, { ColorSchemes } from '../types/colors.d';\r\n\r\nexport function getProperty<T, K extends keyof T>(o: T, propertyName: K): T[K] {\r\n\treturn o[propertyName];\r\n}\r\nexport function noteFromPitch(frequency: number) {\r\n\tlet noteStrings = [\r\n\t\t'C',\r\n\t\t'C#',\r\n\t\t'D',\r\n\t\t'D#',\r\n\t\t'E',\r\n\t\t'F',\r\n\t\t'F#',\r\n\t\t'G',\r\n\t\t'G#',\r\n\t\t'A',\r\n\t\t'A#',\r\n\t\t'B',\r\n\t];\r\n\tlet noteNum = 12 * (Math.log(frequency / 440) / Math.log(2));\r\n\treturn noteStrings[(Math.round(noteNum) + 69) % 12];\r\n}\r\nexport function useAsyncEffect(\r\n\tfn: () => Promise<void | (() => void)>,\r\n\tdependencies?: React.DependencyList\r\n) {\r\n\treturn React.useEffect(() => {\r\n\t\tconst destructorPromise = fn();\r\n\t\treturn () => {\r\n\t\t\tdestructorPromise.then(destructor => destructor && destructor());\r\n\t\t};\r\n\t\t// eslint-disable-next-line react-hooks/exhaustive-deps\r\n\t}, dependencies);\r\n}\r\n\r\nexport function determineStringBeingTuned2(\r\n\ttuning: string,\r\n\tfrequency: number,\r\n\tbuffer: Float32Array,\r\n\tsampleRate: number\r\n) {\r\n\t// Get the frequencies and letters for the specific tuning\r\n\tlet tuningFrequencies = getProperty(\r\n\t\tgetProperty(\r\n\t\t\tTunings,\r\n\t\t\ttuning as\r\n\t\t\t\t| 'Standard'\r\n\t\t\t\t| 'Drop D'\r\n\t\t\t\t| 'Double Drop D'\r\n\t\t\t\t| 'DADGAD'\r\n\t\t\t\t| 'Open D'\r\n\t\t\t\t| 'Open E'\r\n\t\t\t\t| 'Open G'\r\n\t\t),\r\n\t\t'frequencies'\r\n\t);\r\n\tlet tuningLetters = getProperty(\r\n\t\tgetProperty(\r\n\t\t\tTunings,\r\n\t\t\ttuning as\r\n\t\t\t\t| 'Standard'\r\n\t\t\t\t| 'Drop D'\r\n\t\t\t\t| 'Double Drop D'\r\n\t\t\t\t| 'DADGAD'\r\n\t\t\t\t| 'Open D'\r\n\t\t\t\t| 'Open E'\r\n\t\t\t\t| 'Open G'\r\n\t\t),\r\n\t\t'letters'\r\n\t);\r\n\tlet detectedFreq = frequency;\r\n\tlet closestFreq = 0;\r\n\tlet closestLetter = '-';\r\n\tlet minIndex = 0;\r\n\tlet minDifference = 9999;\r\n\r\n\t// This way makes the ui change very often, but still needs to be improved.\r\n\t// It seems that when a sound seems to be the same note, but a different octave, the program will consider it to be the string being tuned,\r\n\t// instead of the next note\r\n\tObject.values(tuningFrequencies).map((stringFreq, index) => {\r\n\t\tlet offset = Math.round(sampleRate / stringFreq);\r\n\r\n\t\tlet difference = 0;\r\n\t\tfor (let i = 0; i < buffer.length / 2; i++) {\r\n\t\t\tdifference += Math.abs(buffer[i] - buffer[i + offset]);\r\n\t\t}\r\n\t\tdifference /= buffer.length / 2;\r\n\t\tif (\r\n\t\t\tdifference < minDifference &&\r\n\t\t\tdetectedFreq !== 0 &&\r\n\t\t\tMath.abs(detectedFreq - stringFreq) < 70\r\n\t\t) {\r\n\t\t\tminDifference = difference;\r\n\t\t\tminIndex = index;\r\n\t\t}\r\n\t\treturn null;\r\n\t});\r\n\t// Get the letter note closest to the one being tuned\r\n\tclosestLetter = getProperty(\r\n\t\ttuningLetters,\r\n\t\t`string_${minIndex + 1}` as keyof Letters\r\n\t);\r\n\t// Get the expected frequency of the string being tuned\r\n\tclosestFreq = getProperty(\r\n\t\ttuningFrequencies,\r\n\t\t`string_${minIndex + 1}` as keyof Frequencies\r\n\t);\r\n\t// Get the current color scheme based on the note letter\r\n\tlet currentColors = getProperty(\r\n\t\tcolors,\r\n\t\tclosestLetter as keyof ColorSchemes\r\n\t);\r\n\treturn {\r\n\t\tcurrentStringBeingTuned: {\r\n\t\t\tletter: closestLetter,\r\n\t\t\tfrequency: closestFreq,\r\n\t\t},\r\n\t\tcurrentColors: currentColors,\r\n\t};\r\n}\r\nexport function getColorFromNote(note: string) {\r\n\tlet currentColors = getProperty(colors, note as keyof ColorSchemes);\r\n\treturn {\r\n\t\tcurrentColors: currentColors,\r\n\t};\r\n}\r\nexport function determineStringBeingTuned(tuning: string, frequency: number) {\r\n\t// Get the frequencies and letters for the specific tuning\r\n\tlet tuningFrequencies = getProperty(\r\n\t\tgetProperty(\r\n\t\t\tTunings,\r\n\t\t\ttuning as\r\n\t\t\t\t| 'Standard'\r\n\t\t\t\t| 'Drop D'\r\n\t\t\t\t| 'Double Drop D'\r\n\t\t\t\t| 'DADGAD'\r\n\t\t\t\t| 'Open D'\r\n\t\t\t\t| 'Open E'\r\n\t\t\t\t| 'Open G'\r\n\t\t),\r\n\t\t'frequencies'\r\n\t);\r\n\tlet tuningLetters = getProperty(\r\n\t\tgetProperty(\r\n\t\t\tTunings,\r\n\t\t\ttuning as\r\n\t\t\t\t| 'Standard'\r\n\t\t\t\t| 'Drop D'\r\n\t\t\t\t| 'Double Drop D'\r\n\t\t\t\t| 'DADGAD'\r\n\t\t\t\t| 'Open D'\r\n\t\t\t\t| 'Open E'\r\n\t\t\t\t| 'Open G'\r\n\t\t),\r\n\t\t'letters'\r\n\t);\r\n\tlet detectedFreq = frequency;\r\n\tlet closestFreq = 0;\r\n\tlet closestLetter = '-';\r\n\tlet maxDifference = 9999;\r\n\tlet maxVariance = 2;\r\n\tlet minIndex = 0;\r\n\tconsole.log(detectedFreq);\r\n\t// Compute the absolute differences and figure out the minimum\r\n\t// Map over the list of string frequencies\r\n\tObject.values(tuningFrequencies).map((stringFreq, index) => {\r\n\t\t// Compute the difference between the one detected, and the one known\r\n\t\tlet diff = Math.abs(detectedFreq - stringFreq);\r\n\t\t// If the diffrence is smaller\r\n\t\tif (diff < maxDifference + maxVariance && detectedFreq !== 0) {\r\n\t\t\t// We found the new minimum\r\n\t\t\tmaxDifference = diff;\r\n\t\t\t// Get the index of the minimum\r\n\t\t\tminIndex = index;\r\n\t\t\t// Update the closest letter and freq\r\n\t\t}\r\n\t\treturn null;\r\n\t});\r\n\t// Get the letter note closest to the one being tuned\r\n\tclosestLetter = getProperty(\r\n\t\ttuningLetters,\r\n\t\t`string_${minIndex + 1}` as keyof Letters\r\n\t);\r\n\t// Get the expected frequency of the string being tuned\r\n\tclosestFreq = getProperty(\r\n\t\ttuningFrequencies,\r\n\t\t`string_${minIndex + 1}` as keyof Frequencies\r\n\t);\r\n\t// Get the current color scheme based on the note letter\r\n\tlet currentColors = getProperty(\r\n\t\tcolors,\r\n\t\tclosestLetter as keyof ColorSchemes\r\n\t);\r\n\treturn {\r\n\t\tcurrentStringBeingTuned: {\r\n\t\t\tletter: closestLetter,\r\n\t\t\tfrequency: closestFreq,\r\n\t\t},\r\n\t\tcurrentColors: currentColors,\r\n\t};\r\n}\r\n// export function createRulerDivs(){\r\n// \tlet rulerDivs = new Array(23).fill(0).map((line, index) => {\r\n// \t\tlet height;\r\n// \t\tif (index === 0 || (index - 1) % 5 !== 0) {\r\n// \t\t\theight = 60;\r\n// \t\t} else {\r\n// \t\t\theight = 110;\r\n// \t\t}\r\n// \t\treturn (\r\n// \t\t\t<div\r\n// \t\t\t\tkey={index}\r\n// \t\t\t\tstyle={{\r\n// \t\t\t\t\twidth: '3px',\r\n// \t\t\t\t\theight: height + 'px',\r\n// \t\t\t\t\tbackgroundColor: 'rgba(51, 51, 51, 70)',\r\n// \t\t\t\t}}\r\n// \t\t\t></div>\r\n// \t\t);\r\n// \t});\r\n// \tlet translationDistanceToLastLine =\r\n// \t\tthis.state.windowWidth / 2 -\r\n// \t\tthis.state.rulerDistanceBetweenGradings;\r\n// \tlet clampRulerToWindowCondition =\r\n// \t\t(Math.abs(\r\n// \t\t\tthis.state.frequency -\r\n// \t\t\t\tthis.state.currentStringBeingTuned.frequency\r\n// \t\t) /\r\n// \t\t\t5) *\r\n// \t\t\tthis.state.rulerDistanceBetweenGradings >\r\n// \t\ttranslationDistanceToLastLine;\r\n// \tlet signOfDifference =\r\n// \t\tthis.state.frequency -\r\n// \t\t\tthis.state.currentStringBeingTuned.frequency <\r\n// \t\t0\r\n// \t\t\t? -1\r\n// \t\t\t: 1;\r\n// \tlet rulerTranslate =\r\n// \t\tthis.state.frequency !== 0\r\n// \t\t\t? clampRulerToWindowCondition\r\n// \t\t\t\t? signOfDifference * translationDistanceToLastLine\r\n// \t\t\t\t: ((this.state.frequency -\r\n// \t\t\t\t\t\tthis.state.currentStringBeingTuned.frequency) /\r\n// \t\t\t\t\t\t5) *\r\n// \t\t\t\t  this.state.rulerDistanceBetweenGradings\r\n// \t\t\t: 0;\r\n\r\n// \tlet tuningIndication;\r\n// \tif (this.state.frequency !== 0) {\r\n// \t\tif (\r\n// \t\t\tthis.state.frequency <\r\n// \t\t\tthis.state.currentStringBeingTuned.frequency\r\n// \t\t) {\r\n// \t\t\ttuningIndication = 'Tune Higher';\r\n// \t\t} else if (\r\n// \t\t\tthis.state.frequency >\r\n// \t\t\tthis.state.currentStringBeingTuned.frequency\r\n// \t\t) {\r\n// \t\t\ttuningIndication = 'Tune Lower';\r\n// \t\t} else {\r\n// \t\t\ttuningIndication = 'In Tune';\r\n// \t\t}\r\n// \t} else {\r\n// \t\ttuningIndication = '';\r\n// \t}\r\n// }\r\n","import { instantiateStreaming } from \"@assemblyscript/loader\";\r\nimport YinModuleTypes from \"../types/yin-asTypes\";\r\nimport AcModuleTypes from \"../types/ac-asTypes\";\r\n\r\nexport const loadYinWasm = instantiateStreaming<typeof YinModuleTypes>(\r\n  fetch(\"yin-optimized.wasm\")\r\n).then(({ exports }) =>\r\n  Object.assign({}, exports, {\r\n    YinDetector: (\r\n      arrayValues: Float32Array,\r\n      setAcceptanceThreshold: number,\r\n      sampleRate: number,\r\n      probabilityThreshold: number\r\n    ) => {\r\n      const pInput = exports.__retain(\r\n        exports.__newArray(exports.Float32AudioBuffer_ID, arrayValues)\r\n      );\r\n      const pOutput = exports.getPitch(\r\n        pInput,\r\n        setAcceptanceThreshold,\r\n        sampleRate,\r\n        probabilityThreshold,\r\n        arrayValues.length\r\n      );\r\n      exports.__release(pInput);\r\n      return pOutput;\r\n    },\r\n  })\r\n);\r\nexport const loadACWasm = instantiateStreaming<typeof AcModuleTypes>(\r\n  fetch(\"ac-optimized.wasm\")\r\n).then(({ exports }) =>\r\n  Object.assign({}, exports, {\r\n    ACDetector: (arrayValues: Float32Array, sampleRate: number) => {\r\n      const pInput = exports.__retain(\r\n        exports.__newArray(exports.Float32AudioBuffer_ID, arrayValues)\r\n      );\r\n      const pOutput = exports.autocorellation(pInput, sampleRate);\r\n      exports.__release(pInput);\r\n      return pOutput;\r\n    },\r\n  })\r\n);\r\n","import { loadYinWasm, loadACWasm } from \"./wasmLoader\";\r\n\r\nexport function autocorellation(buffer: Float32Array, sampleRate: number) {\r\n  let rms = 0;\r\n  let size = buffer.length;\r\n  for (let index = 0; index < size; index++) {\r\n    const val = buffer[index];\r\n    rms += val * val;\r\n  }\r\n  rms = Math.sqrt(rms / size);\r\n  if (rms < 0.01) return -1;\r\n\r\n  let r1 = 0,\r\n    r2 = size - 1,\r\n    thresh = 0.2;\r\n\r\n  for (let index = 0; index < size / 2; index++) {\r\n    if (Math.abs(buffer[index]) < thresh) {\r\n      r1 = index;\r\n      break;\r\n    }\r\n  }\r\n  for (let index = 0; index < size / 2; index++) {\r\n    if (Math.abs(buffer[size - 1]) < thresh) {\r\n      r2 = size - index;\r\n      break;\r\n    }\r\n  }\r\n  buffer = buffer.slice(r1, r2);\r\n  size = buffer.length;\r\n\r\n  let c = new Array(size).fill(0);\r\n  for (let i = 0; i < size; i++) {\r\n    for (let j = 0; j < size - i; j++) {\r\n      c[i] = c[i] + buffer[j] * buffer[j + i];\r\n    }\r\n  }\r\n  let d = 0;\r\n  while (c[d] > c[d + 1]) d++;\r\n  let maxval = -1,\r\n    maxpos = -1;\r\n  for (let index = d; index < size; index++) {\r\n    if (c[index] > maxval) {\r\n      maxval = c[index];\r\n      maxpos = index;\r\n    }\r\n  }\r\n  let t0 = maxpos;\r\n  let x1 = c[t0 - 1],\r\n    x2 = c[t0],\r\n    x3 = c[t0 + 1];\r\n  let a = (x1 + x3 - 2 * x2) / 2,\r\n    b = (x3 - x1) / 2;\r\n  if (a) t0 = t0 - b / (2 * a);\r\n  return sampleRate / t0;\r\n}\r\nexport function YIN() {\r\n  return loadYinWasm\r\n    .then((result) => result.YinDetector)\r\n    .catch((e) => console.log(e));\r\n}\r\nexport function AC() {\r\n  return loadACWasm\r\n    .then((result) => result.ACDetector)\r\n    .catch((e) => console.log(e));\r\n}\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M43.9664 82.1234C31.9756 82.1234 19.4851 141.791 0 141.791V373H654V141.791C627.021 141.791 616.529 82.1234 604.538 82.1234C592.547 82.1234 596.044 141.791 553.077 141.791C510.11 141.791 521.102 1.35937e-06 460.148 0C399.195 -1.35937e-06 424.176 141.791 321.254 141.791C218.333 141.791 228.825 0 176.365 0C123.905 0 108.417 141.791 86.4339 141.791C64.4507 141.791 55.9572 82.1234 43.9664 82.1234Z\",\n  fill: \"url(#paint0_radial)\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"radialGradient\", {\n  id: \"paint0_radial\",\n  cx: 0,\n  cy: 0,\n  r: 1,\n  gradientUnits: \"userSpaceOnUse\",\n  gradientTransform: \"translate(327) rotate(90) scale(480.301 842.137)\"\n}, /*#__PURE__*/React.createElement(\"stop\", {\n  stopColor: \"var(--color-1)\"\n}), /*#__PURE__*/React.createElement(\"stop\", {\n  offset: 1,\n  stopColor: \"var(--color-2)\"\n})));\n\nfunction SvgWave(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 650 373\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    preserveAspectRatio: \"xMidYMin slice\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgWave);\nexport default __webpack_public_path__ + \"static/media/Wave.b99f5774.svg\";\nexport { ForwardRef as ReactComponent };","import * as React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { motion, useAnimation } from \"framer-motion\";\r\n\r\nexport interface RulerProps {\r\n  rulerGradings: JSX.Element[];\r\n  gradingColors: string;\r\n  rulerTranslate: number;\r\n}\r\n\r\nlet RulerContainer = styled.div`\r\n  z-index: 99999;\r\n  position: absolute;\r\n  bottom: 0;\r\n  width: 100%;\r\n  display: flex;\r\n  justify-content: space-evenly;\r\n  align-items: flex-end;\r\n`;\r\n\r\nconst Ruler: React.FunctionComponent<RulerProps> = ({\r\n  rulerGradings,\r\n  gradingColors,\r\n  rulerTranslate,\r\n}) => {\r\n  const controls = useAnimation();\r\n  React.useEffect(() => {\r\n    controls.start({\r\n      translateX: rulerTranslate,\r\n      transition: {\r\n        duration: 0.15,\r\n      },\r\n    });\r\n  }, [rulerTranslate, controls]);\r\n  return (\r\n    <RulerContainer>\r\n      {rulerGradings}\r\n      <motion.div\r\n        animate={controls}\r\n        style={{\r\n          position: \"absolute\",\r\n          // transform: `translateX(${rulerTranslate}px)`,\r\n          width: \"3px\",\r\n          height: 110,\r\n          backgroundColor: gradingColors,\r\n        }}\r\n      ></motion.div>\r\n    </RulerContainer>\r\n  );\r\n};\r\n\r\nexport default Ruler;\r\n","import * as React from 'react';\r\nimport styled from 'styled-components';\r\n\r\nexport interface StringBeingTunedProps {\r\n\tnote: string;\r\n\tfrequency: number;\r\n\tnoteProps: NoteProps;\r\n\ttoggleLiveInput: (\r\n\t\tevent: React.MouseEvent<HTMLDivElement, MouseEvent>\r\n\t) => void;\r\n}\r\nexport interface NoteProps {\r\n\tcolor?: string;\r\n}\r\nlet StyledContainer = styled.div`\r\n\tmargin-top: 3rem;\r\n\tdisplay: flex;\r\n\tflex-direction: column;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n`;\r\nlet Superscript = styled.sup`\r\n\tfont-size: 40px;\r\n\tline-height: 144px;\r\n\tfont-weight: 400;\r\n`;\r\nlet Note = styled.h1<NoteProps>`\r\n\tmargin: 0;\r\n\tcolor: ${props => props.color};\r\n\tfont-size: 144px;\r\n\tline-height: 144px;\r\n\tfont-weight: 400;\r\n`;\r\nlet Frequency = styled.p`\r\n\tmargin: 0;\r\n\tmargin-top: 20px;\r\n\tcolor: #777777;\r\n\tfont-size: 18px;\r\n\tfont-weight: 400;\r\n`;\r\nconst StringBeingTuned: React.FunctionComponent<StringBeingTunedProps> = React.memo(\r\n\tprops => {\r\n\t\tlet note = props.note.split('');\r\n\t\tlet renderedNote = (\r\n\t\t\t<Note color={props.noteProps.color}>{props.note}</Note>\r\n\t\t);\r\n\t\tif (note.length !== 1) {\r\n\t\t\trenderedNote = (\r\n\t\t\t\t<Note color={props.noteProps.color}>\r\n\t\t\t\t\t{note[0]}\r\n\t\t\t\t\t<Superscript>{note[1]}</Superscript>\r\n\t\t\t\t</Note>\r\n\t\t\t);\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<StyledContainer onClick={props.toggleLiveInput}>\r\n\t\t\t\t{renderedNote}\r\n\t\t\t\t<Frequency>{props.frequency}Hz</Frequency>\r\n\t\t\t</StyledContainer>\r\n\t\t);\r\n\t}\r\n);\r\n\r\nexport default StringBeingTuned;\r\n","import * as React from 'react';\r\nimport styled from 'styled-components';\r\nimport { HTMLMotionProps, motion } from 'framer-motion';\r\n\r\nlet StyledButton = styled(motion.button)<ButtonProps>`\r\n\tfont-weight: 500;\r\n\tfont-size: 18px;\r\n\tcolor: #777777;\r\n\tborder-radius: 66px;\r\n\toutline: none;\r\n\tborder: none;\r\n\tpadding: 10px 30px;\r\n\tbackground-color: transparent;\r\n\tmargin: 0px 10px;\r\n`;\r\n\r\nexport interface ButtonProps extends HTMLMotionProps<'button'> {\r\n\tonClick: (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => void;\r\n\tselected: boolean;\r\n}\r\n\r\nconst Button: React.FunctionComponent<ButtonProps> = React.memo(\r\n\tprops => {\r\n\t\treturn (\r\n\t\t\t<StyledButton\r\n\t\t\t\tanimate={\r\n\t\t\t\t\tprops.selected\r\n\t\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t\tcolor: '#ffffff',\r\n\t\t\t\t\t\t\t\tbackgroundColor: 'rgba(150, 150, 150, 0.2)',\r\n\t\t\t\t\t\t\t\ttransition: { duration: 0.35 },\r\n\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t: {\r\n\t\t\t\t\t\t\t\tcolor: '#777777',\r\n\t\t\t\t\t\t\t\tbackgroundColor: 'rgba(150, 150, 150, 0)',\r\n\t\t\t\t\t\t\t\ttransition: { duration: 0.35 },\r\n\t\t\t\t\t\t  }\r\n\t\t\t\t}\r\n\t\t\t\tonClick={props.onClick}\r\n\t\t\t\tselected={props.selected}\r\n\t\t\t>\r\n\t\t\t\t{props.children}\r\n\t\t\t</StyledButton>\r\n\t\t);\r\n\t},\r\n\t(prevprops, nextprops) => prevprops.selected === nextprops.selected\r\n);\r\n\r\nexport default Button;\r\n","import * as React from 'react';\r\nimport styled from 'styled-components';\r\nimport Button from './Button';\r\nimport tunings from '../../../types/tunings.d';\r\nimport { useHorizontalScroll } from '../../../utils/hooks/useHorizontalScroll';\r\n\r\nlet StyledContainer = styled.div`\r\n\twidth: calc(100% - 30px);\r\n\toverflow-x: auto;\r\n\tpadding-left: 15px;\r\n\tpadding-top: 30px;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\twhite-space: nowrap;\r\n\t::-webkit-scrollbar {\r\n\t\twidth: 0px;\r\n\t}\r\n`;\r\nexport interface ButtonsProps {\r\n\tonClick: (\r\n\t\tevent: React.MouseEvent<HTMLButtonElement, MouseEvent>,\r\n\t\ttuning: string\r\n\t) => void;\r\n\tisChromaticMode: boolean;\r\n}\r\nlet Tunings = Object.keys(tunings);\r\nconst TuningSelectionButtons: React.FunctionComponent<ButtonsProps> = React.memo(\r\n\tprops => {\r\n\t\tconst scrollRef = useHorizontalScroll()\r\n\t\tlet [selected, setSelected] = React.useState(0);\r\n\t\tlet buttons = Tunings.map((tuning, index) => {\r\n\t\t\tlet isSelected = index === selected;\r\n\t\t\treturn (\r\n\t\t\t\t<Button\r\n\t\t\t\t\tkey={index}\r\n\t\t\t\t\tselected={isSelected}\r\n\t\t\t\t\tonClick={event => {\r\n\t\t\t\t\t\tprops.onClick(event, tuning);\r\n\t\t\t\t\t\tsetSelected(index);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{tuning}\r\n\t\t\t\t</Button>\r\n\t\t\t);\r\n\t\t});\r\n\t\treturn (\r\n\t\t\t<StyledContainer\r\n\t\t\t//@ts-ignore\r\n\t\t\t    ref={scrollRef}\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tvisibility: props.isChromaticMode ? 'hidden' : 'visible',\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t{buttons}\r\n\t\t\t</StyledContainer>\r\n\t\t);\r\n\t}\r\n);\r\n\r\nexport default TuningSelectionButtons;\r\n","import { useRef, useEffect } from \"react\";\r\n\r\nexport function useHorizontalScroll () {\r\n    const elRef = useRef();\r\n    useEffect(() => {\r\n      const el = elRef.current;\r\n      if (el) {\r\n          //@ts-ignore\r\n        const onWheel = (e) => {\r\n          if (e.deltaY === 0) return;\r\n          //@ts-ignore\r\n          if (!(el.scrollLeft === 0 && e.deltaY < 0) && !(el.scrollWidth - el.clientWidth - Math.round(el.scrollLeft) === 0 && e.deltaY > 0)) {\r\n            e.preventDefault();\r\n          }\r\n          //@ts-ignore\r\n          el.scrollTo({\r\n              //@ts-ignore\r\n            left: el.scrollLeft + e.deltaY,\r\n            behavior: 'smooth'\r\n          });\r\n        };\r\n        //@ts-ignore\r\n        el.addEventListener('wheel', onWheel);\r\n        //@ts-ignore\r\n        return () => el.removeEventListener('wheel', onWheel);\r\n      }\r\n    }, []);\r\n    return elRef;\r\n  }","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { ISVGProps, ITunerProps } from '../../../types/Interfaces';\r\nimport { ReactComponent as Wave } from '../../../assets/icons/Wave.svg';\r\nimport Ruler from './Ruler';\r\nimport StringBeingTuned from './StringBeingTuned';\r\nimport TuningSelectionButtons from './TuningSelectionButtons';\r\nimport { ReactComponent as Play } from '../../../assets/icons/play.svg';\r\nlet SVGContainer = styled.div`\r\n\twidth: 100%;\r\n\theight: 45%;\r\n\tposition: absolute;\r\n\tbottom: 0;\r\n`;\r\nlet StyledWaveSvg = styled(Wave)<ISVGProps>`\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tposition: absolute;\r\n\tmax-height: 373px;\r\n\t--color-1: ${props => props.color_1};\r\n\t--color-2: ${props => props.color_2};\r\n\tfilter: drop-shadow(0px 0px 10px rgba(0, 0, 0, 0.15));\r\n`;\r\n\r\nconst Tuner: React.FunctionComponent<ITunerProps> = ({\r\n\thandleTuningSelection,\r\n\ttoggleLiveInput,\r\n\tstartOscillator,\r\n\tcurrentStringBeingTuned,\r\n\tcurrentColors,\r\n\tfrequency,\r\n\trulerDivs,\r\n\trulerTranslate,\r\n\ttuningIndication,\r\n\ttimeToCompute,\r\n\tisChromaticMode,\r\n\tcurrentNote,\r\n}: ITunerProps) => {\r\n\treturn (\r\n\t\t<div style={{ height: '90%', width: '100%', position: 'relative' }}>\r\n\t\t\t<TuningSelectionButtons\r\n\t\t\t\tonClick={handleTuningSelection}\r\n\t\t\t\tisChromaticMode={isChromaticMode}\r\n\t\t\t/>\r\n\t\t\t{/* <button onClick={startOscillator}>Oscillator</button> */}\r\n\t\t\t<div\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tdisplay: 'flex',\r\n\t\t\t\t\tjustifyContent: 'center',\r\n\t\t\t\t\talignItems: 'center',\r\n\t\t\t\t\tflexDirection: 'column',\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<StringBeingTuned\r\n\t\t\t\t\tnote={\r\n\t\t\t\t\t\tisChromaticMode\r\n\t\t\t\t\t\t\t? currentNote\r\n\t\t\t\t\t\t\t: currentStringBeingTuned.letter\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfrequency={currentStringBeingTuned.frequency}\r\n\t\t\t\t\tnoteProps={{ color: currentColors.primary }}\r\n\t\t\t\t\ttoggleLiveInput={toggleLiveInput}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\r\n\t\t\t<SVGContainer>\r\n\t\t\t\t<h1\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\t\ttop: '45%',\r\n\t\t\t\t\t\tfontWeight: 400,\r\n\t\t\t\t\t\tfontSize: 18,\r\n\t\t\t\t\t\ttextAlign: 'center',\r\n\t\t\t\t\t\tzIndex: 100,\r\n\t\t\t\t\t\tcolor: currentColors.primary,\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{frequency}Hz\r\n\t\t\t\t</h1>\r\n\t\t\t\t<h1\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\t\ttop: '55%',\r\n\t\t\t\t\t\tfontWeight: 400,\r\n\t\t\t\t\t\tfontSize: 18,\r\n\t\t\t\t\t\ttextAlign: 'center',\r\n\t\t\t\t\t\tzIndex: 100,\r\n\t\t\t\t\t\tcolor: currentColors.primary,\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{tuningIndication}\r\n\t\t\t\t</h1>\r\n\t\t\t\t{/* <h1\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tposition: 'absolute',\r\n\t\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\t\ttop: '55%',\r\n\t\t\t\t\t\tfontWeight: 400,\r\n\t\t\t\t\t\tfontSize: 18,\r\n\t\t\t\t\t\ttextAlign: 'center',\r\n\t\t\t\t\t\tzIndex: 100,\r\n\t\t\t\t\t\tcolor: currentColors.primary,\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{timeToCompute}\r\n\t\t\t\t</h1> */}\r\n\t\t\t\t{!isChromaticMode && (\r\n\t\t\t\t\t<Ruler\r\n\t\t\t\t\t\trulerGradings={rulerDivs}\r\n\t\t\t\t\t\tgradingColors={currentColors.primary}\r\n\t\t\t\t\t\trulerTranslate={rulerTranslate}\r\n\t\t\t\t\t/>\r\n\t\t\t\t)}\r\n\t\t\t\t<StyledWaveSvg\r\n\t\t\t\t\tcolor_1={currentColors.gradient_lighter}\r\n\t\t\t\t\tcolor_2={currentColors.gradient_darker}\r\n\t\t\t\t\tstyle={{ position: 'absolute', bottom: 0, left: 0 }}\r\n\t\t\t\t/>\r\n\t\t\t</SVGContainer>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Tuner;\r\n","import * as React from 'react';\r\n\r\nexport const context = React.createContext(false);\r\n","import React from 'react';\r\nimport {\r\n\tdetermineStringBeingTuned,\r\n\tgetColorFromNote,\r\n\tnoteFromPitch,\r\n} from '../../utils/functions';\r\nimport { autocorellation, YIN, AC } from '../../utils/detectors';\r\nimport {\r\n\tITunerContainerState,\r\n\tITunerContainerProps,\r\n} from '../../types/Interfaces';\r\nimport { AudioContext } from 'standardized-audio-context';\r\nimport Tuner from './components/Tuner';\r\nimport Header from '../../common/components/Header';\r\nimport { context } from '../../utils/context';\r\nimport colors from '../../types/colors.d';\r\n\r\nclass TunerContainer extends React.Component<\r\n\tITunerContainerProps,\r\n\tITunerContainerState\r\n> {\r\n\tyinDetector: any;\r\n\tconstructor(props: ITunerContainerProps) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tanalyser: undefined,\r\n\t\t\taudioContext: undefined,\r\n\t\t\tbuffer: new Float32Array(2048),\r\n\t\t\tfrequency: 0,\r\n\t\t\ttimeToCompute: 0,\r\n\t\t\tnote: '-',\r\n\t\t\tmediaStreamSource: undefined,\r\n\t\t\toscillatorNode: undefined,\r\n\t\t\tisPlaying: false,\r\n\t\t\trequestAnimationFrameID: undefined,\r\n\t\t\tcurrentTuning: 'Standard',\r\n\t\t\tcurrentStringBeingTuned: { frequency: 0, letter: '-' },\r\n\t\t\twindowWidth: 650,\r\n\t\t\trulerDistanceBetweenGradings: 27.083333333333332,\r\n\t\t\tsameFrequencyCounter: 0,\r\n\t\t\tisChromatic: false,\r\n\t\t};\r\n\t\tthis.gotStream = this.gotStream.bind(this);\r\n\t\tthis.findPitch = this.findPitch.bind(this);\r\n\t\tthis.findPitchWithYIN = this.findPitchWithYIN.bind(this);\r\n\t\tthis.liveInput = this.liveInput.bind(this);\r\n\t\tthis.oscillator = this.oscillator.bind(this);\r\n\t\tthis.handleTuningSelection = this.handleTuningSelection.bind(this);\r\n\t\tthis.toggleChromaticMode = this.toggleChromaticMode.bind(this);\r\n\t\tthis.chromaticMode = this.chromaticMode.bind(this);\r\n\t\tthis.liveInputModePicker = this.liveInputModePicker.bind(this)\r\n\t}\r\n\t// Resize the ruler spacing on window resize\r\n\tcomponentDidMount() {\r\n\t\twindow.addEventListener('resize', event => {\r\n\t\t\tlet windowWidth = Math.min(\r\n\t\t\t\tdocument.body.scrollWidth,\r\n\t\t\t\tdocument.documentElement.scrollWidth,\r\n\t\t\t\tdocument.body.offsetWidth,\r\n\t\t\t\tdocument.documentElement.offsetWidth,\r\n\t\t\t\tdocument.documentElement.clientWidth,\r\n\t\t\t\t650\r\n\t\t\t);\r\n\t\t\tthis.setState({\r\n\t\t\t\trulerDistanceBetweenGradings: windowWidth / 24,\r\n\t\t\t\twindowWidth: windowWidth,\r\n\t\t\t});\r\n\t\t});\r\n\t\t// this.liveInput();\r\n\t}\r\n\ttoggleChromaticMode() {\r\n\t\tthis.setState(prevState => ({ isChromatic: !prevState.isChromatic }));\r\n\t}\r\n\t// Callback for initializing the stream source and running the find pitch algorithm\r\n\tgotStream(stream: MediaStream, liveInputModeCallback: () => void) {\r\n\t\tlet volume;\r\n\t\tlet mediaStreamSource;\r\n\t\tlet newAnalyser = this.state.analyser;\r\n\t\tif (newAnalyser) newAnalyser.fftSize = 4096;\r\n\t\tif (this.state.audioContext) {\r\n\t\t\tvolume = this.state.audioContext.createGain();\r\n\t\t\tvolume.gain.value = 2;\r\n\t\t\tmediaStreamSource = this.state.audioContext.createMediaStreamSource(\r\n\t\t\t\tstream\r\n\t\t\t);\r\n\r\n\t\t\tmediaStreamSource.connect(volume);\r\n\t\t\tif (newAnalyser) volume.connect(newAnalyser);\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tmediaStreamSource: mediaStreamSource,\r\n\t\t\tanalyser: newAnalyser,\r\n\t\t\tisPlaying: true,\r\n\t\t});\r\n\t\tliveInputModeCallback();\r\n\t}\r\n\tasync findPitchWithYIN() {\r\n\t\tif (this.state.analyser) {\r\n\t\t\tlet buffer = new Float32Array(2048);\r\n\t\t\tthis.state.analyser.getFloatTimeDomainData(buffer);\r\n\t\t\tthis.setState({ buffer: buffer });\r\n\t\t}\r\n\r\n\t\tlet ac = 0;\r\n\t\tlet t0 = performance.now();\r\n\t\tif (this.state.audioContext) {\r\n\t\t\t// Autocorellation 45-50ms per pass on ngrok\r\n\t\t\t// let autocorell = await AC();\r\n\t\t\t// if (autocorell)\r\n\t\t\t//   ac = autocorell(this.state.buffer, this.state.audioContext.sampleRate);\r\n\t\t\t// YIN 36-40ms per pass on ngrok server\r\n\t\t\tlet yin = await YIN();\r\n\t\t\tif (yin)\r\n\t\t\t\tac = yin(\r\n\t\t\t\t\tthis.state.buffer,\r\n\t\t\t\t\t0.3,\r\n\t\t\t\t\tthis.state.audioContext.sampleRate,\r\n\t\t\t\t\t0.95\r\n\t\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet t1 = performance.now();\r\n\t\tthis.setState({\r\n\t\t\ttimeToCompute: t1 - t0,\r\n\t\t});\r\n\t\tif (ac !== -1 && ac > 30 && ac < 1048) {\r\n\t\t\tlet pitch = Math.round(ac);\r\n\t\t\tlet absoluteDiffOfFreq = Math.abs(this.state.frequency - pitch);\r\n\t\t\tif (Math.round(pitch) === this.state.frequency) {\r\n\t\t\t\tthis.setState(prevState => {\r\n\t\t\t\t\tif (prevState.sameFrequencyCounter + 1 === 10) {\r\n\t\t\t\t\t\treturn { sameFrequencyCounter: 0 };\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tsameFrequencyCounter:\r\n\t\t\t\t\t\t\tprevState.sameFrequencyCounter + 1,\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (!(absoluteDiffOfFreq > 1) && !(absoluteDiffOfFreq < 20))\r\n\t\t\t\tpitch = this.state.frequency;\r\n\t\t\tthis.setState({\r\n\t\t\t\tfrequency: pitch,\r\n\t\t\t\tnote: noteFromPitch(pitch),\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.setState({ frequency: 0, note: '-' });\r\n\t\t}\r\n\t\tlet rafID = window.requestAnimationFrame(() =>\r\n\t\t\tthis.setStringCurrentlyBeingTuned(\r\n\t\t\t\tthis.state.currentTuning,\r\n\t\t\t\tthis.findPitchWithYIN\r\n\t\t\t)\r\n\t\t);\r\n\t\tthis.setState({ requestAnimationFrameID: rafID });\r\n\t}\r\n\tfindPitch() {\r\n\t\tif (this.state.analyser) {\r\n\t\t\tlet buffer = new Float32Array(2048);\r\n\t\t\tthis.state.analyser.getFloatTimeDomainData(buffer);\r\n\t\t\tthis.setState({ buffer: buffer });\r\n\t\t}\r\n\r\n\t\tlet t0 = performance.now();\r\n\t\tlet ac = 0;\r\n\t\tif (this.state.audioContext)\r\n\t\t\tac = autocorellation(\r\n\t\t\t\tthis.state.buffer,\r\n\t\t\t\tthis.state.audioContext.sampleRate\r\n\t\t\t);\r\n\t\tlet t1 = performance.now();\r\n\r\n\t\tif (ac !== -1) {\r\n\t\t\tlet pitch = ac;\r\n\t\t\tthis.setState({\r\n\t\t\t\tfrequency: Math.floor(pitch),\r\n\t\t\t\tnote: noteFromPitch(pitch),\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.setState({ frequency: 0, note: '-' });\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\ttimeToCompute: t1 - t0,\r\n\t\t});\r\n\t\tlet rafID = window.requestAnimationFrame(() =>\r\n\t\t\tthis.setStringCurrentlyBeingTuned(\r\n\t\t\t\tthis.state.currentTuning,\r\n\t\t\t\tthis.findPitch\r\n\t\t\t)\r\n\t\t);\r\n\t\tthis.setState({ requestAnimationFrameID: rafID });\r\n\t}\r\n\tliveInputModePicker(){\r\n\t\tif(this.state.isChromatic){\r\n\t\t\tthis.liveInput(this.chromaticMode)\r\n\t\t}else{\r\n\t\t\tthis.liveInput(this.findPitchWithYIN)\r\n\t\t}\r\n\t} \r\n\tasync chromaticMode() {\r\n\t\tif (this.state.analyser) {\r\n\t\t\tlet buffer = new Float32Array(2048);\r\n\t\t\tthis.state.analyser.getFloatTimeDomainData(buffer);\r\n\t\t\tthis.setState({ buffer: buffer });\r\n\t\t}\r\n\r\n\t\tlet ac = 0;\r\n\t\tlet t0 = performance.now();\r\n\t\tif (this.state.audioContext) {\r\n\t\t\t// Autocorellation 45-50ms per pass on ngrok\r\n\t\t\t// let autocorell = await AC();\r\n\t\t\t// if (autocorell)\r\n\t\t\t//   ac = autocorell(this.state.buffer, this.state.audioContext.sampleRate);\r\n\t\t\t// YIN 36-40ms per pass on ngrok server\r\n\t\t\tlet yin = await YIN();\r\n\t\t\tif (yin)\r\n\t\t\t\tac = yin(\r\n\t\t\t\t\tthis.state.buffer,\r\n\t\t\t\t\t0.3,\r\n\t\t\t\t\tthis.state.audioContext.sampleRate,\r\n\t\t\t\t\t0.95\r\n\t\t\t\t);\r\n\t\t}\r\n\r\n\t\tlet t1 = performance.now();\r\n\t\tthis.setState({\r\n\t\t\ttimeToCompute: t1 - t0,\r\n\t\t});\r\n\t\tif (ac !== -1 && ac > 30 && ac < 1048) {\r\n\t\t\tlet pitch = Math.round(ac);\r\n\t\t\tlet absoluteDiffOfFreq = Math.abs(this.state.frequency - pitch);\r\n\t\t\tif (Math.round(pitch) === this.state.frequency) {\r\n\t\t\t\tthis.setState(prevState => {\r\n\t\t\t\t\tif (prevState.sameFrequencyCounter + 1 === 10) {\r\n\t\t\t\t\t\treturn { sameFrequencyCounter: 0 };\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tsameFrequencyCounter:\r\n\t\t\t\t\t\t\tprevState.sameFrequencyCounter + 1,\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (!(absoluteDiffOfFreq > 1) && !(absoluteDiffOfFreq < 20))\r\n\t\t\t\tpitch = this.state.frequency;\r\n\t\t\tthis.setState({\r\n\t\t\t\tfrequency: pitch,\r\n\t\t\t\tnote: noteFromPitch(pitch),\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.setState({ frequency: 0, note: '-' });\r\n\t\t}\r\n\t\tlet rafID = window.requestAnimationFrame(() =>\r\n\t\t\tthis.setColorsFromNote(\r\n\t\t\t\tnoteFromPitch(Math.round(ac)),\r\n\t\t\t\tthis.chromaticMode\r\n\t\t\t)\r\n\t\t);\r\n\t\tthis.setState({ requestAnimationFrameID: rafID });\r\n\t}\r\n\tsetColorsFromNote(note: string, callback: FrameRequestCallback) {\r\n\t\tif (this.state.frequency !== 0 && this.state.audioContext) {\r\n\t\t\tlet colors = getColorFromNote(note);\r\n\t\t\tthis.props.setColors(colors.currentColors);\r\n\t\t}\r\n\t\tsetTimeout(() => {\r\n\t\t\trequestAnimationFrame(callback);\r\n\t\t}, 25);\r\n\t}\r\n\tsetStringCurrentlyBeingTuned(\r\n\t\ttuning: string,\r\n\t\tcallback: FrameRequestCallback\r\n\t) {\r\n\t\tif (this.state.frequency !== 0 && this.state.audioContext) {\r\n\t\t\tlet result = determineStringBeingTuned(\r\n\t\t\t\ttuning,\r\n\t\t\t\tthis.state.frequency\r\n\t\t\t\t// this.state.buffer,\r\n\t\t\t\t// this.state.audioContext.sampleRate\r\n\t\t\t);\r\n\r\n\t\t\tthis.props.setColors(result.currentColors);\r\n\t\t\tthis.setState({\r\n\t\t\t\tcurrentStringBeingTuned: result.currentStringBeingTuned,\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.setState({\r\n\t\t\t\tcurrentStringBeingTuned: { letter: '-', frequency: 0 },\r\n\t\t\t});\r\n\t\t}\r\n\t\tsetTimeout(() => {\r\n\t\t\trequestAnimationFrame(callback);\r\n\t\t}, 25);\r\n\t}\r\n\tliveInput(liveInputMode: () => void) {\r\n\t\tif (this.state.isPlaying) {\r\n\t\t\t//stop playing and return\r\n\t\t\tthis.state.oscillatorNode?.stop();\r\n\t\t\tif (this.state.requestAnimationFrameID) {\r\n\t\t\t\twindow.cancelAnimationFrame(this.state.requestAnimationFrameID);\r\n\t\t\t}\r\n\t\t\tthis.props.setColors({\r\n\t\t\t\tprimary: colors.A.primary,\r\n\t\t\t\tgradient_lighter: colors.A.gradient_lighter,\r\n\t\t\t\tgradient_darker: colors.A.gradient_darker,\r\n\t\t\t});\r\n\t\t\tthis.setState({\r\n\t\t\t\tisPlaying: false,\r\n\t\t\t\toscillatorNode: undefined,\r\n\t\t\t\tanalyser: undefined,\r\n\t\t\t\tfrequency: 0,\r\n\t\t\t\ttimeToCompute: 0,\r\n\t\t\t\tnote: '-',\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tlet context = new AudioContext();\r\n\t\t\tthis.setState({\r\n\t\t\t\taudioContext: context,\r\n\t\t\t\tanalyser: context.createAnalyser(),\r\n\t\t\t});\r\n\t\t\tnavigator.mediaDevices\r\n\t\t\t\t.getUserMedia({\r\n\t\t\t\t\taudio: {\r\n\t\t\t\t\t\tautoGainControl: false,\r\n\t\t\t\t\t\tnoiseSuppression: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t})\r\n\t\t\t\t.then(stream => this.gotStream(stream, liveInputMode))\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tconsole.log('Getusermedia threw error: ' + err);\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\toscillator() {\r\n\t\tif (this.state.isPlaying) {\r\n\t\t\t//stop playing and return\r\n\t\t\tif (this.state.oscillatorNode) this.state.oscillatorNode.stop(0);\r\n\t\t\tthis.setState({\r\n\t\t\t\toscillatorNode: undefined,\r\n\t\t\t\tanalyser: undefined,\r\n\t\t\t\tisPlaying: false,\r\n\t\t\t});\r\n\t\t\tif (this.state.requestAnimationFrameID)\r\n\t\t\t\twindow.cancelAnimationFrame(this.state.requestAnimationFrameID);\r\n\t\t}\r\n\t\tlet context = new AudioContext();\r\n\t\tlet analyser = context.createAnalyser();\r\n\t\tanalyser.fftSize = 4096;\r\n\t\tlet oscillator = context.createOscillator();\r\n\t\toscillator.connect(analyser);\r\n\t\tanalyser.connect(context.destination);\r\n\t\tlet volume = context.createGain();\r\n\t\tvolume.connect(context.destination);\r\n\t\tvolume.gain.value = -0.95;\r\n\t\toscillator.connect(volume);\r\n\t\tlet oscillatorFreq = 60;\r\n\t\toscillator.frequency.setValueAtTime(\r\n\t\t\toscillatorFreq,\r\n\t\t\tcontext.currentTime\r\n\t\t);\r\n\t\tsetInterval(() => {\r\n\t\t\toscillator.frequency.setValueAtTime(\r\n\t\t\t\toscillatorFreq,\r\n\t\t\t\tcontext.currentTime\r\n\t\t\t);\r\n\t\t\toscillatorFreq += 1;\r\n\t\t}, 50);\r\n\t\toscillator.start(0);\r\n\t\tthis.setState({\r\n\t\t\taudioContext: context,\r\n\t\t\tanalyser: analyser,\r\n\t\t\toscillatorNode: oscillator,\r\n\t\t\tisPlaying: true,\r\n\t\t});\r\n\t\tthis.findPitchWithYIN();\r\n\t}\r\n\thandleTuningSelection(\r\n\t\tevent: React.MouseEvent<HTMLButtonElement, MouseEvent>,\r\n\t\ttuning: string\r\n\t) {\r\n\t\tthis.setState({ currentTuning: tuning });\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet rulerDivs = new Array(23).fill(0).map((line, index) => {\r\n\t\t\tlet height;\r\n\t\t\tif (index === 0 || (index - 1) % 5 !== 0) {\r\n\t\t\t\theight = 60;\r\n\t\t\t} else {\r\n\t\t\t\theight = 110;\r\n\t\t\t}\r\n\t\t\treturn (\r\n\t\t\t\t<div\r\n\t\t\t\t\tkey={index}\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\twidth: '3px',\r\n\t\t\t\t\t\theight: height + 'px',\r\n\t\t\t\t\t\tbackgroundColor: 'rgba(51, 51, 51, 70)',\r\n\t\t\t\t\t}}\r\n\t\t\t\t></div>\r\n\t\t\t);\r\n\t\t});\r\n\t\tlet translationDistanceToLastLine =\r\n\t\t\tthis.state.windowWidth / 2 -\r\n\t\t\tthis.state.rulerDistanceBetweenGradings;\r\n\t\tlet clampRulerToWindowCondition =\r\n\t\t\t(Math.abs(\r\n\t\t\t\tthis.state.frequency -\r\n\t\t\t\t\tthis.state.currentStringBeingTuned.frequency\r\n\t\t\t) /\r\n\t\t\t\t5) *\r\n\t\t\t\tthis.state.rulerDistanceBetweenGradings >\r\n\t\t\ttranslationDistanceToLastLine;\r\n\t\tlet signOfDifference =\r\n\t\t\tthis.state.frequency -\r\n\t\t\t\tthis.state.currentStringBeingTuned.frequency <\r\n\t\t\t0\r\n\t\t\t\t? -1\r\n\t\t\t\t: 1;\r\n\t\tlet rulerTranslate =\r\n\t\t\tthis.state.frequency !== 0\r\n\t\t\t\t? clampRulerToWindowCondition\r\n\t\t\t\t\t? signOfDifference * translationDistanceToLastLine\r\n\t\t\t\t\t: ((this.state.frequency -\r\n\t\t\t\t\t\t\tthis.state.currentStringBeingTuned.frequency) /\r\n\t\t\t\t\t\t\t5) *\r\n\t\t\t\t\t  this.state.rulerDistanceBetweenGradings\r\n\t\t\t\t: 0;\r\n\r\n\t\tlet tuningIndication;\r\n\t\tif (this.state.frequency !== 0) {\r\n\t\t\tif (\r\n\t\t\t\tthis.state.frequency <\r\n\t\t\t\tthis.state.currentStringBeingTuned.frequency\r\n\t\t\t) {\r\n\t\t\t\ttuningIndication = 'Tune Higher';\r\n\t\t\t} else if (\r\n\t\t\t\tthis.state.frequency >\r\n\t\t\t\tthis.state.currentStringBeingTuned.frequency\r\n\t\t\t) {\r\n\t\t\t\ttuningIndication = 'Tune Lower';\r\n\t\t\t} else {\r\n\t\t\t\ttuningIndication = 'In Tune';\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\ttuningIndication = '';\r\n\t\t}\r\n\t\tconsole.log('CHROMATIC', this.state.isChromatic)\r\n\t\treturn (\r\n\t\t\t<context.Provider value={this.state.isChromatic}>\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<Header\r\n\t\t\t\t\t\tnavigateLocation={'/metronome'}\r\n\t\t\t\t\t\tsetColors={this.props.setColors}\r\n\t\t\t\t\t\tmenuColor={this.props.currentColors.gradient_lighter}\r\n\t\t\t\t\t\ttoggleChromaticMode={this.toggleChromaticMode}\r\n\t\t\t\t\t\tchromaticMode={this.chromaticMode}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Tuner\r\n\t\t\t\t\t\tcurrentColors={this.props.currentColors}\r\n\t\t\t\t\t\tcurrentStringBeingTuned={\r\n\t\t\t\t\t\t\tthis.state.currentStringBeingTuned\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tcurrentNote={this.state.note}\r\n\t\t\t\t\t\tfrequency={this.state.frequency}\r\n\t\t\t\t\t\thandleTuningSelection={this.handleTuningSelection}\r\n\t\t\t\t\t\trulerDivs={rulerDivs}\r\n\t\t\t\t\t\trulerTranslate={rulerTranslate}\r\n\t\t\t\t\t\ttoggleLiveInput={\r\n\t\t\t\t\t\t\tthis.liveInputModePicker\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstartOscillator={this.oscillator}\r\n\t\t\t\t\t\ttimeToCompute={this.state.timeToCompute}\r\n\t\t\t\t\t\ttuningIndication={tuningIndication}\r\n\t\t\t\t\t\tisChromaticMode={this.state.isChromatic}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t</context.Provider>\r\n\t\t);\r\n\t}\r\n}\r\nTunerContainer.contextType = context;\r\n\r\nexport default TunerContainer;\r\n"],"sourceRoot":""}